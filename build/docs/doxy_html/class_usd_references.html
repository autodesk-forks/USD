<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Universal Scene Description: UsdReferences Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="usd_style.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="https://openusd.org/images/USDIcon.ico"/>
<!-- ... other metadata & script includes ... -->
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
</script>
<!-- Add warning banner to top of page if current page isn't the release version -->
<script>
function AddWarningBanner() 
{
  // Get current URL
  const loc = new URL(location.href);
  // Look for URL of the format "<USD hostname>/<version|dev|release>/api/<file.html>"
  // NOTE: If versioning approach ever changes, this will need updating
  var apiIndex = loc.pathname.indexOf("/api/");
  if (apiIndex >= 0) {
    // Truncate "/api/..." off path to get preceding path and "/" index
    var truncString = loc.pathname.slice(0,apiIndex);
    // Get index of first "/" before "/api/"
    var preApiIndex = truncString.lastIndexOf("/");
    var verString = truncString.slice(preApiIndex + 1);
    // if the current page isn't the release version, add a warning banner 
    if (verString !== "release") {
      // Create alternate "release" URL for page
      // NOTE: This won't always be a valid URL, e.g. if dev release has a brand new page
      var relURL = loc.pathname.substring(0,preApiIndex) + "/release" + loc.pathname.substring(apiIndex);
      var banner = document.createElement("div");
      banner.className = "non_release_version_warning";
      if (verString === "dev") {
        banner.innerHTML = "This document is for a version of USD that is under development. See <a href='" + relURL + "'>this page</a> for the current release.";
      } else {
        // For now, we assume any other string is an older version string
        banner.innerHTML = "This document is for an older version of USD. See <a href='" + relURL + "'>this page</a> for the current release.";
      }
      document.body.insertBefore(banner,document.body.childNodes[0]);
    }
  }
} 
</script>
</head>
<body onload="AddWarningBanner()">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="USDLogoDocs.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_usd_references.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="class_usd_references-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">UsdReferences Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><a class="el" href="class_usd_references.html" title="UsdReferences provides an interface to authoring and introspecting references in Usd.">UsdReferences</a> provides an interface to authoring and introspecting references in Usd.  
 <a href="class_usd_references.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a95bf456b23a234d3aa017015a4ad05e0"><td class="memItemLeft" align="right" valign="top">USD_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_usd_references.html#a95bf456b23a234d3aa017015a4ad05e0">AddReference</a> (const <a class="el" href="class_sdf_reference.html">SdfReference</a> &amp;ref, <a class="el" href="common_8h.html#a28349701078995dc76a99331bb60c555">UsdListPosition</a> position=<a class="el" href="common_8h.html#a28349701078995dc76a99331bb60c555a681727d9e5aecd6058825ab1fe888028">UsdListPositionBackOfPrependList</a>)</td></tr>
<tr class="memdesc:a95bf456b23a234d3aa017015a4ad05e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a reference to the reference listOp at the current EditTarget, in the position specified by <code>position</code>.  <a href="#a95bf456b23a234d3aa017015a4ad05e0">More...</a><br /></td></tr>
<tr class="separator:a95bf456b23a234d3aa017015a4ad05e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a890b5681714fae1c1f807a8b0f4ab67b"><td class="memItemLeft" align="right" valign="top">USD_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_usd_references.html#a890b5681714fae1c1f807a8b0f4ab67b">AddReference</a> (const std::string &amp;identifier, const <a class="el" href="class_sdf_path.html">SdfPath</a> &amp;primPath, const <a class="el" href="class_sdf_layer_offset.html">SdfLayerOffset</a> &amp;layerOffset=<a class="el" href="class_sdf_layer_offset.html">SdfLayerOffset</a>(), <a class="el" href="common_8h.html#a28349701078995dc76a99331bb60c555">UsdListPosition</a> position=<a class="el" href="common_8h.html#a28349701078995dc76a99331bb60c555a681727d9e5aecd6058825ab1fe888028">UsdListPositionBackOfPrependList</a>)</td></tr>
<tr class="separator:a890b5681714fae1c1f807a8b0f4ab67b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f3efc53c1a5a8386fd4bd0cdae964e4"><td class="memItemLeft" align="right" valign="top">USD_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_usd_references.html#a9f3efc53c1a5a8386fd4bd0cdae964e4">AddReference</a> (const std::string &amp;identifier, const <a class="el" href="class_sdf_layer_offset.html">SdfLayerOffset</a> &amp;layerOffset=<a class="el" href="class_sdf_layer_offset.html">SdfLayerOffset</a>(), <a class="el" href="common_8h.html#a28349701078995dc76a99331bb60c555">UsdListPosition</a> position=<a class="el" href="common_8h.html#a28349701078995dc76a99331bb60c555a681727d9e5aecd6058825ab1fe888028">UsdListPositionBackOfPrependList</a>)</td></tr>
<tr class="memdesc:a9f3efc53c1a5a8386fd4bd0cdae964e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is an overloaded member function, provided for convenience. It differs from the above function only in what argument(s) it accepts.  <a href="#a9f3efc53c1a5a8386fd4bd0cdae964e4">More...</a><br /></td></tr>
<tr class="separator:a9f3efc53c1a5a8386fd4bd0cdae964e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a310c2ec6ea4c1864f9a0986a4cc7a660"><td class="memItemLeft" align="right" valign="top">USD_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_usd_references.html#a310c2ec6ea4c1864f9a0986a4cc7a660">AddInternalReference</a> (const <a class="el" href="class_sdf_path.html">SdfPath</a> &amp;primPath, const <a class="el" href="class_sdf_layer_offset.html">SdfLayerOffset</a> &amp;layerOffset=<a class="el" href="class_sdf_layer_offset.html">SdfLayerOffset</a>(), <a class="el" href="common_8h.html#a28349701078995dc76a99331bb60c555">UsdListPosition</a> position=<a class="el" href="common_8h.html#a28349701078995dc76a99331bb60c555a681727d9e5aecd6058825ab1fe888028">UsdListPositionBackOfPrependList</a>)</td></tr>
<tr class="memdesc:a310c2ec6ea4c1864f9a0986a4cc7a660"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add an internal reference to the specified prim.  <a href="#a310c2ec6ea4c1864f9a0986a4cc7a660">More...</a><br /></td></tr>
<tr class="separator:a310c2ec6ea4c1864f9a0986a4cc7a660"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fd641f7036babe56824c154fe12ed07"><td class="memItemLeft" align="right" valign="top">USD_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_usd_references.html#a8fd641f7036babe56824c154fe12ed07">RemoveReference</a> (const <a class="el" href="class_sdf_reference.html">SdfReference</a> &amp;ref)</td></tr>
<tr class="memdesc:a8fd641f7036babe56824c154fe12ed07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the specified reference from the references listOp at the current EditTarget.  <a href="#a8fd641f7036babe56824c154fe12ed07">More...</a><br /></td></tr>
<tr class="separator:a8fd641f7036babe56824c154fe12ed07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6df0e79e00349cafe24650755bf4ad64"><td class="memItemLeft" align="right" valign="top">USD_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_usd_references.html#a6df0e79e00349cafe24650755bf4ad64">ClearReferences</a> ()</td></tr>
<tr class="memdesc:a6df0e79e00349cafe24650755bf4ad64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the authored reference listOp edits at the current EditTarget.  <a href="#a6df0e79e00349cafe24650755bf4ad64">More...</a><br /></td></tr>
<tr class="separator:a6df0e79e00349cafe24650755bf4ad64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa60f8d9938279668c63844d4bfc58e39"><td class="memItemLeft" align="right" valign="top">USD_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_usd_references.html#aa60f8d9938279668c63844d4bfc58e39">SetReferences</a> (const SdfReferenceVector &amp;items)</td></tr>
<tr class="memdesc:aa60f8d9938279668c63844d4bfc58e39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Explicitly set the references, potentially blocking weaker opinions that add or remove items.  <a href="#aa60f8d9938279668c63844d4bfc58e39">More...</a><br /></td></tr>
<tr class="separator:aa60f8d9938279668c63844d4bfc58e39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac44ba4d2d2cd5b29ff6b2af537f5940c"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="class_usd_prim.html">UsdPrim</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_usd_references.html#ac44ba4d2d2cd5b29ff6b2af537f5940c">GetPrim</a> () const</td></tr>
<tr class="memdesc:ac44ba4d2d2cd5b29ff6b2af537f5940c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the prim this object is bound to.  <a href="#ac44ba4d2d2cd5b29ff6b2af537f5940c">More...</a><br /></td></tr>
<tr class="separator:ac44ba4d2d2cd5b29ff6b2af537f5940c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae819fcefe5dd54e01483fb7764b42112"><td class="memItemLeft" align="right" valign="top"><a class="el" href="class_usd_prim.html">UsdPrim</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_usd_references.html#ae819fcefe5dd54e01483fb7764b42112">GetPrim</a> ()</td></tr>
<tr class="separator:ae819fcefe5dd54e01483fb7764b42112"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b3baad8c612d81b96e46f84d7e97580"><td class="memItemLeft" align="right" valign="top"><a id="a9b3baad8c612d81b96e46f84d7e97580"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>operator bool</b> ()</td></tr>
<tr class="separator:a9b3baad8c612d81b96e46f84d7e97580"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a2456ef04cace6b3b67dad91da7f430b8"><td class="memItemLeft" align="right" valign="top"><a id="a2456ef04cace6b3b67dad91da7f430b8"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>UsdPrim</b></td></tr>
<tr class="separator:a2456ef04cace6b3b67dad91da7f430b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="class_usd_references.html" title="UsdReferences provides an interface to authoring and introspecting references in Usd.">UsdReferences</a> provides an interface to authoring and introspecting references in Usd. </p>
<p>References are the primary operator for "encapsulated aggregation" of scene description. <em>aggregation</em> means that references let us build up rich scenes by composing scene description recorded in a (most often) different layer. A scene can reference the same layer many times at different locations in a scene's namespace. Referenced scene description can be overridden in the referencing (or stronger) layers, allowing each instance of the reference to be directly customized/overridden. <em>Encapsulated</em> means that regardless of how much scene description is in the referenced layer, only the scene description under and composed from (via other composition arcs in the referenced layer) the targeted prim will be composed into the aggregate scene. Multiple references to the same layer will result in the layer being opened and retained in memory only once, although each referencing prim will compose unique <a class="el" href="class_pcp_prim_index.html">prim indices</a> for the tree rooted at the referenced prim.</p>
<h1><a class="anchor" id="Usd_References"></a>
Important Qualities and Effective Use of References</h1>
<ul>
<li>Any prim can host zero, one or multiple references</li>
</ul>
<ul>
<li>References are <a class="el" href="class_sdf_list_op.html">list editable</a>; that is, they compose differently than ordinary properties and metadata. In any given LayerStack, each authored reference operation at the same <a class="el" href="class_sdf_path.html" title="A path value used to locate objects in layers or scenegraphs.">SdfPath</a> location in each layer (i.e. on the same prim) will compose into an aggregate result by adding to, removing from, or replacing "weaker" references.</li>
</ul>
<ul>
<li>References can target the same LayerStack in which they are authored, as long as doing so does not introduce a cycle in the composition graph. See <a class="el" href="class_usd_references.html#Usd_Internal_References">Expressing "internal" references to the containing LayerStack</a></li>
</ul>
<ul>
<li>The <code>identifier</code> component of a reference in the provided API can be a resolvable asset-path to some external layer, empty, in which case the reference targets the root layer of the LayerStack containing the referencing layer, or the identifier of an existing anonymous, in-memory-only <a class="el" href="class_sdf_layer.html" title="A scene description container that can combine with other such containers to form simple component as...">SdfLayer</a>. Care should be exercised in the latter case: calling Export() on an anonymous layer to serialize it to a file will not attempt to replace any references to anonymous layers with references to file-backed layers.</li>
</ul>
<ul>
<li>Opinions brought in by reference on an ancestor prim are weaker than opinions brought in by references on a descendant prim.</li>
</ul>
<h2><a class="anchor" id="Usd_DefaultPrim_References"></a>
Expressing references without prim paths</h2>
<p>References may omit the target prim path if the referenced layer has the 'defaultPrim' metadata set. In this case, the reference targets the 'defaultPrim' in the referenced layer. A layer's defaultPrim can be authored and accessed on a <a class="el" href="class_usd_stage.html" title="The outermost container for scene description, which owns and presents composed prims as a scenegraph...">UsdStage</a> whose root layer is the layer in question: see <a class="el" href="class_usd_stage.html#a64ee78980b91d82dddfae78300276bca" title="Return the root UsdPrim on this stage whose name is the root layer&#39;s defaultPrim metadata&#39;s value.">UsdStage::GetDefaultPrim()</a> and <a class="el" href="class_usd_stage.html#a82b260faf91fbf721b0503075f2861e2" title="Set the default prim layer metadata in this stage&#39;s root layer.">UsdStage::SetDefaultPrim()</a>. One can also author defaultPrim directly on an <a class="el" href="class_sdf_layer.html" title="A scene description container that can combine with other such containers to form simple component as...">SdfLayer</a> - see <a class="el" href="class_sdf_layer.html#a9f4bc091a43e577b49007cceed42e6ae" title="Return the defaultPrim metadata for this layer.">SdfLayer::GetDefaultPrim()</a>, <a class="el" href="class_sdf_layer.html#aced01fe7c9cd1be544adf59275d2f1d2" title="Set the default prim metadata for this layer.">SdfLayer::SetDefaultPrim()</a>.</p>
<h2><a class="anchor" id="Usd_Internal_References"></a>
Expressing "internal" references to the containing LayerStack</h2>
<p>References may omit the identifier specifying the referenced layer. This creates an "internal" reference. During composition, the referenced layer will be resolved to the root layer of the LayerStack containing the layer where the reference was authored. See <a class="el" href="class_usd_references.html#a310c2ec6ea4c1864f9a0986a4cc7a660" title="Add an internal reference to the specified prim.">AddInternalReference()</a>.</p>
<h2><a class="anchor" id="Usd_Subroot_References"></a>
Referencing sub-root prims</h2>
<p>References may target any prim in a layer. In the simplest and most common case, a root prim in a layer will be referenced. However, referencing sub-root prims can be useful in a variety of other cases; for example, a user might organize prims into a meaningful hierarchy in a layer for display purposes, then use sub-root references to reference a selection from that hierarchy into a scene.</p>
<p>Sub-root references have subtle behaviors with respect to opinions and composition arcs authored on ancestors of the referenced prim. Users should carefully consider this when deciding whether to use sub-root references. These issues can be avoided by not authoring any properties or metadata on ancestors of prims that are meant to be referenced.</p>
<p>Consider the following example:</p>
<div class="fragment"><div class="line">* shot.usda                                 | * asset.usda</div><div class="line">                                            |</div><div class="line"><span class="preprocessor">#usda 1.0                                   | #usda 1.0</span></div><div class="line">                                            |</div><div class="line">over <span class="stringliteral">&quot;Class&quot;</span>                                | <span class="keyword">class </span>&quot;Class&quot;</div><div class="line">{                                           | {</div><div class="line">    over <span class="stringliteral">&quot;B&quot;</span>                                | }</div><div class="line">    {                                       |</div><div class="line">        over <span class="stringliteral">&quot;Model&quot;</span>                        | def <span class="stringliteral">&quot;A&quot;</span> (</div><div class="line">        {                                   |    inherits = &lt;/Class&gt;</div><div class="line">            <span class="keywordtype">int</span> a = 3                       | )</div><div class="line">        }                                   | {</div><div class="line">    }                                       |     token purpose = <span class="stringliteral">&quot;render&quot;</span></div><div class="line">}                                           |</div><div class="line">                                            |     def <span class="stringliteral">&quot;B&quot;</span> (</div><div class="line">over <span class="stringliteral">&quot;A&quot;</span>                                    |        variantSets = <span class="stringliteral">&quot;type&quot;</span></div><div class="line">{                                           |        variants = {</div><div class="line">    over <span class="stringliteral">&quot;B&quot;</span> (                              |             <span class="keywordtype">string</span> type = <span class="stringliteral">&quot;a&quot;</span></div><div class="line"><span class="preprocessor">        # variant selection won&#39;t be used   |        }</span></div><div class="line">        variants = {                        |     )</div><div class="line">            <span class="keywordtype">string</span> type = <span class="stringliteral">&quot;b&quot;</span>               |     {</div><div class="line">        }                                   |         variantSet <span class="stringliteral">&quot;type&quot;</span> = {</div><div class="line">    )                                       |             <span class="stringliteral">&quot;a&quot;</span> {</div><div class="line">    {                                       |                 def <span class="stringliteral">&quot;Model&quot;</span></div><div class="line">    }                                       |                 {</div><div class="line">}                                           |                     <span class="keywordtype">int</span> a = 1</div><div class="line">                                            |                 }</div><div class="line">def <span class="stringliteral">&quot;ReferencedModel&quot;</span> (                     |             }</div><div class="line">    references = @./asset.usda@&lt;/A/B/Model&gt; |             <span class="stringliteral">&quot;b&quot;</span> {</div><div class="line">)                                           |                 def <span class="stringliteral">&quot;Model&quot;</span></div><div class="line">{                                           |                 {</div><div class="line">}                                           |                     <span class="keywordtype">int</span> a = 2</div><div class="line">                                            |                 }</div><div class="line">                                            |             }</div><div class="line">                                            |         }</div><div class="line">                                            |     }</div><div class="line">                                            | }</div></div><!-- fragment --><ul>
<li>Property and metadata opinions on the ancestors of the referenced prim <em>are not</em> present in the composed stage and will never contribute to any computations. In this example, the opinion for the attribute /A.purpose in asset.usda will never be visible in the <a class="el" href="class_usd_stage.html" title="The outermost container for scene description, which owns and presents composed prims as a scenegraph...">UsdStage</a> for shot.usda.</li>
<li>Property and metadata opinions due to ancestral composition arcs <em>are</em> present in the composed stage. In this example, the attribute /Class/B/Model.a in shot.usda will be present in the <a class="el" href="class_usd_stage.html" title="The outermost container for scene description, which owns and presents composed prims as a scenegraph...">UsdStage</a> for shot.usda, even though the inherit arc is authored on an ancestor of the referenced prim.</li>
<li>A consequence of these rules is that users might not be able to override ancestral variant selections that affect the referenced prim. In this example, the Model prim being referenced comes from the variant selection {type=a} on prim /A/B in asset.usda. The {type=b} variant cannot be selected in shot.usda, even if prims with the same hierarchy happen to exist there. There are various workarounds for this; in this example, the {type=b} variant selection could be authored on /Class/B/Model in shot.usda instead because of the inherit arc that was established on prim /A.</li>
</ul>
<h2><a class="anchor" id="Usd_Failing_References"></a>
Reasons why adding a reference may fail, why adding a reference may succeed but still generate errors, and what it all means</h2>
<p><a class="el" href="class_usd_references.html#a95bf456b23a234d3aa017015a4ad05e0" title="Adds a reference to the reference listOp at the current EditTarget, in the position specified by posi...">AddReference()</a> and <a class="el" href="class_usd_references.html#aa60f8d9938279668c63844d4bfc58e39" title="Explicitly set the references, potentially blocking weaker opinions that add or remove items.">SetReferences()</a> can each fail for a number of reasons. If one of the specified prim targets for one of the references is not a prim, we will generate an error, fail to author any scene description, and return <code>false</code>. If anything goes wrong in attempting to write the reference, we also return false, and the reference will also remain unauthored. Otherwise, if the reference was successfully authored, we will return <code>true</code>. <b>A successful reference authoring operation may still generate composition errors!</b> Just because the reference you specified was syntactically correct and therefore successfully authored, does not imply it was meaningful. If you wish to ensure that the reference you are about to author will be meaningfully consumable by your stage, you are strongly encouraged to <b>ensure it will resolve to an actual file by using <a class="el" href="class_usd_stage.html#a5d23f48d36d27f3f8e5099a8c655fa4e" title="Resolve the given identifier using this stage&#39;s ArResolverContext and the layer of its GetEditTarget(...">UsdStage::ResolveIdentifierToEditTarget()</a> before authoring the reference.</b></p>
<p>When adding an internal reference, the given prim path is expected to be in the namespace of the owning prim's stage. Sub-root prim paths will be translated from this namespace to the namespace of the current edit target, if necessary. If a path cannot be translated, a coding error will be issued and no changes will be made. Non-sub-root paths will not be translated.</p>
<p>Immediately upon successful authoring of the reference (before returning from <a class="el" href="class_usd_references.html#a95bf456b23a234d3aa017015a4ad05e0" title="Adds a reference to the reference listOp at the current EditTarget, in the position specified by posi...">AddReference()</a>, <a class="el" href="class_usd_references.html#a8fd641f7036babe56824c154fe12ed07" title="Removes the specified reference from the references listOp at the current EditTarget.">RemoveReference()</a>, <a class="el" href="class_usd_references.html#a6df0e79e00349cafe24650755bf4ad64" title="Removes the authored reference listOp edits at the current EditTarget.">ClearReferences()</a>, or <a class="el" href="class_usd_references.html#aa60f8d9938279668c63844d4bfc58e39" title="Explicitly set the references, potentially blocking weaker opinions that add or remove items.">SetReferences()</a>), the <a class="el" href="class_usd_stage.html" title="The outermost container for scene description, which owns and presents composed prims as a scenegraph...">UsdStage</a> on which the reference was authored will recompose the subtree rooted at the prim hosting the reference. If the provided identifier does not resolve to a layer that is already opened or that can be opened in the usd format, <em>or</em> if the provided primPath is not an actual prim in that layer, the stage's recomposition will fail, and pass on composition errors to the client. </p>

<p class="definition">Definition at line <a class="el" href="references_8h_source.html#l00214">214</a> of file <a class="el" href="references_8h_source.html">references.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a310c2ec6ea4c1864f9a0986a4cc7a660"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a310c2ec6ea4c1864f9a0986a4cc7a660">&#9670;&nbsp;</a></span>AddInternalReference()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">USD_API bool AddInternalReference </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_sdf_path.html">SdfPath</a> &amp;&#160;</td>
          <td class="paramname"><em>primPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_sdf_layer_offset.html">SdfLayerOffset</a> &amp;&#160;</td>
          <td class="paramname"><em>layerOffset</em> = <code><a class="el" href="class_sdf_layer_offset.html">SdfLayerOffset</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common_8h.html#a28349701078995dc76a99331bb60c555">UsdListPosition</a>&#160;</td>
          <td class="paramname"><em>position</em> = <code><a class="el" href="common_8h.html#a28349701078995dc76a99331bb60c555a681727d9e5aecd6058825ab1fe888028">UsdListPositionBackOfPrependList</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add an internal reference to the specified prim. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_usd_references.html#Usd_Internal_References">Internal References</a> </dd></dl>

</div>
</div>
<a id="a95bf456b23a234d3aa017015a4ad05e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95bf456b23a234d3aa017015a4ad05e0">&#9670;&nbsp;</a></span>AddReference() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">USD_API bool AddReference </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_sdf_reference.html">SdfReference</a> &amp;&#160;</td>
          <td class="paramname"><em>ref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common_8h.html#a28349701078995dc76a99331bb60c555">UsdListPosition</a>&#160;</td>
          <td class="paramname"><em>position</em> = <code><a class="el" href="common_8h.html#a28349701078995dc76a99331bb60c555a681727d9e5aecd6058825ab1fe888028">UsdListPositionBackOfPrependList</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a reference to the reference listOp at the current EditTarget, in the position specified by <code>position</code>. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_usd_references.html#Usd_Failing_References">Why adding references may fail</a> for explanation of expectations on <code>ref</code> and what return values and errors to expect, and <a class="el" href="_usd__page__object_model.html#Usd_OM_ListOps">ListOps and List Editing</a> for details on list editing and composition of listOps. </dd></dl>

</div>
</div>
<a id="a890b5681714fae1c1f807a8b0f4ab67b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a890b5681714fae1c1f807a8b0f4ab67b">&#9670;&nbsp;</a></span>AddReference() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">USD_API bool AddReference </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>identifier</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_sdf_path.html">SdfPath</a> &amp;&#160;</td>
          <td class="paramname"><em>primPath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_sdf_layer_offset.html">SdfLayerOffset</a> &amp;&#160;</td>
          <td class="paramname"><em>layerOffset</em> = <code><a class="el" href="class_sdf_layer_offset.html">SdfLayerOffset</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common_8h.html#a28349701078995dc76a99331bb60c555">UsdListPosition</a>&#160;</td>
          <td class="paramname"><em>position</em> = <code><a class="el" href="common_8h.html#a28349701078995dc76a99331bb60c555a681727d9e5aecd6058825ab1fe888028">UsdListPositionBackOfPrependList</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is an overloaded member function, provided for convenience. It differs from the above function only in what argument(s) it accepts. </p>

</div>
</div>
<a id="a9f3efc53c1a5a8386fd4bd0cdae964e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f3efc53c1a5a8386fd4bd0cdae964e4">&#9670;&nbsp;</a></span>AddReference() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">USD_API bool AddReference </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>identifier</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_sdf_layer_offset.html">SdfLayerOffset</a> &amp;&#160;</td>
          <td class="paramname"><em>layerOffset</em> = <code><a class="el" href="class_sdf_layer_offset.html">SdfLayerOffset</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common_8h.html#a28349701078995dc76a99331bb60c555">UsdListPosition</a>&#160;</td>
          <td class="paramname"><em>position</em> = <code><a class="el" href="common_8h.html#a28349701078995dc76a99331bb60c555a681727d9e5aecd6058825ab1fe888028">UsdListPositionBackOfPrependList</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is an overloaded member function, provided for convenience. It differs from the above function only in what argument(s) it accepts. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_usd_references.html#Usd_DefaultPrim_References">References Without Prim Paths</a> </dd></dl>

</div>
</div>
<a id="a6df0e79e00349cafe24650755bf4ad64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6df0e79e00349cafe24650755bf4ad64">&#9670;&nbsp;</a></span>ClearReferences()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">USD_API bool ClearReferences </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes the authored reference listOp edits at the current EditTarget. </p>
<p>The same caveats for Remove() apply to Clear(). In fact, Clear() may actually increase the number of composed references, if the listOp being cleared contained the "remove" operator. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="_usd__page__object_model.html#Usd_OM_ListOps">ListOps and List Editing</a> </dd></dl>

</div>
</div>
<a id="ac44ba4d2d2cd5b29ff6b2af537f5940c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac44ba4d2d2cd5b29ff6b2af537f5940c">&#9670;&nbsp;</a></span>GetPrim() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="class_usd_prim.html">UsdPrim</a>&amp; GetPrim </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Return the prim this object is bound to. </p>

<p class="definition">Definition at line <a class="el" href="references_8h_source.html#l00277">277</a> of file <a class="el" href="references_8h_source.html">references.h</a>.</p>

</div>
</div>
<a id="ae819fcefe5dd54e01483fb7764b42112"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae819fcefe5dd54e01483fb7764b42112">&#9670;&nbsp;</a></span>GetPrim() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_usd_prim.html">UsdPrim</a> GetPrim </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This is an overloaded member function, provided for convenience. It differs from the above function only in what argument(s) it accepts. </p>

<p class="definition">Definition at line <a class="el" href="references_8h_source.html#l00280">280</a> of file <a class="el" href="references_8h_source.html">references.h</a>.</p>

</div>
</div>
<a id="a8fd641f7036babe56824c154fe12ed07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fd641f7036babe56824c154fe12ed07">&#9670;&nbsp;</a></span>RemoveReference()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">USD_API bool RemoveReference </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_sdf_reference.html">SdfReference</a> &amp;&#160;</td>
          <td class="paramname"><em>ref</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Removes the specified reference from the references listOp at the current EditTarget. </p>
<p>This does not necessarily eliminate the reference completely, as it may be added or set in another layer in the same LayerStack as the current EditTarget. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="_usd__page__object_model.html#Usd_OM_ListOps">ListOps and List Editing</a> </dd></dl>

</div>
</div>
<a id="aa60f8d9938279668c63844d4bfc58e39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa60f8d9938279668c63844d4bfc58e39">&#9670;&nbsp;</a></span>SetReferences()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">USD_API bool SetReferences </td>
          <td>(</td>
          <td class="paramtype">const SdfReferenceVector &amp;&#160;</td>
          <td class="paramname"><em>items</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Explicitly set the references, potentially blocking weaker opinions that add or remove items. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="class_usd_references.html#Usd_Failing_References">Why adding references may fail</a> for explanation of expectations on <code>ref</code> and what return values and errors to expect, and <a class="el" href="_usd__page__object_model.html#Usd_OM_ListOps">ListOps and List Editing</a> for details on list editing and composition of listOps. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>pxr/usd/usd/<a class="el" href="references_8h_source.html">references.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.6-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_usd_references.html">UsdReferences</a></li>
    <li class="footer">&copy; Copyright 2023, Pixar Animation Studios. Generated on Mon Nov 20 2023 16:07:10 by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>