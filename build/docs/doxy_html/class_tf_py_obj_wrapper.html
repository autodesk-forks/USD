<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Universal Scene Description: TfPyObjWrapper Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="usd_style.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="https://openusd.org/images/USDIcon.ico"/>
<!-- ... other metadata & script includes ... -->
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
</script>
<!-- Add warning banner to top of page if current page isn't the release version -->
<script>
function AddWarningBanner() 
{
  // Get current URL
  const loc = new URL(location.href);
  // Look for URL of the format "<USD hostname>/<version|dev|release>/api/<file.html>"
  // NOTE: If versioning approach ever changes, this will need updating
  var apiIndex = loc.pathname.indexOf("/api/");
  if (apiIndex >= 0) {
    // Truncate "/api/..." off path to get preceding path and "/" index
    var truncString = loc.pathname.slice(0,apiIndex);
    // Get index of first "/" before "/api/"
    var preApiIndex = truncString.lastIndexOf("/");
    var verString = truncString.slice(preApiIndex + 1);
    // if the current page isn't the release version, add a warning banner 
    if (verString !== "release") {
      // Create alternate "release" URL for page
      // NOTE: This won't always be a valid URL, e.g. if dev release has a brand new page
      var relURL = loc.pathname.substring(0,preApiIndex) + "/release" + loc.pathname.substring(apiIndex);
      var banner = document.createElement("div");
      banner.className = "non_release_version_warning";
      if (verString === "dev") {
        banner.innerHTML = "This document is for a version of USD that is under development. See <a href='" + relURL + "'>this page</a> for the current release.";
      } else {
        // For now, we assume any other string is an older version string
        banner.innerHTML = "This document is for an older version of USD. See <a href='" + relURL + "'>this page</a> for the current release.";
      }
      document.body.insertBefore(banner,document.body.childNodes[0]);
    }
  }
} 
</script>
</head>
<body onload="AddWarningBanner()">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="USDLogoDocs.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_tf_py_obj_wrapper.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="class_tf_py_obj_wrapper-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">TfPyObjWrapper Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Boost Python object wrapper.  
 <a href="class_tf_py_obj_wrapper.html#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for TfPyObjWrapper:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="class_tf_py_obj_wrapper__inherit__graph.png" border="0" usemap="#_tf_py_obj_wrapper_inherit__map" alt="Inheritance graph"/></div>
<map name="_tf_py_obj_wrapper_inherit__map" id="_tf_py_obj_wrapper_inherit__map">
<area shape="rect"  title="Boost Python object wrapper." alt="" coords="5,5,131,32"/>
<area shape="rect"  href="class_tf_py_override.html" title="A reimplementation of boost::python::override." alt="" coords="15,80,121,107"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad9e36ff89e234ccad53d4618dc5fa475"><td class="memItemLeft" align="right" valign="top">TF_API&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tf_py_obj_wrapper.html#ad9e36ff89e234ccad53d4618dc5fa475">TfPyObjWrapper</a> ()</td></tr>
<tr class="memdesc:ad9e36ff89e234ccad53d4618dc5fa475"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default construct a <a class="el" href="class_tf_py_obj_wrapper.html" title="Boost Python object wrapper.">TfPyObjWrapper</a> holding a reference to python None.  <a href="#ad9e36ff89e234ccad53d4618dc5fa475">More...</a><br /></td></tr>
<tr class="separator:ad9e36ff89e234ccad53d4618dc5fa475"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5b9924c62126e5aeb241d21cb9a3295"><td class="memItemLeft" align="right" valign="top">TF_API&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tf_py_obj_wrapper.html#af5b9924c62126e5aeb241d21cb9a3295">TfPyObjWrapper</a> (object obj)</td></tr>
<tr class="memdesc:af5b9924c62126e5aeb241d21cb9a3295"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a TfPyObjectWrapper wrapping <em>obj</em>.  <a href="#af5b9924c62126e5aeb241d21cb9a3295">More...</a><br /></td></tr>
<tr class="separator:af5b9924c62126e5aeb241d21cb9a3295"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a115702fc3cb62a3c3bf4b3c89f3bc373"><td class="memItemLeft" align="right" valign="top">object const  &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tf_py_obj_wrapper.html#a115702fc3cb62a3c3bf4b3c89f3bc373">Get</a> () const</td></tr>
<tr class="memdesc:a115702fc3cb62a3c3bf4b3c89f3bc373"><td class="mdescLeft">&#160;</td><td class="mdescRight">Underlying object access.  <a href="#a115702fc3cb62a3c3bf4b3c89f3bc373">More...</a><br /></td></tr>
<tr class="separator:a115702fc3cb62a3c3bf4b3c89f3bc373"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeddca8ee3f8a757ae8fdf114260df477"><td class="memItemLeft" align="right" valign="top">TF_API PyObject *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tf_py_obj_wrapper.html#aeddca8ee3f8a757ae8fdf114260df477">ptr</a> () const</td></tr>
<tr class="memdesc:aeddca8ee3f8a757ae8fdf114260df477"><td class="mdescLeft">&#160;</td><td class="mdescRight">Underlying PyObject* access.  <a href="#aeddca8ee3f8a757ae8fdf114260df477">More...</a><br /></td></tr>
<tr class="separator:aeddca8ee3f8a757ae8fdf114260df477"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c108a8743c168d71c9731e5e9f63596"><td class="memItemLeft" align="right" valign="top">TF_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tf_py_obj_wrapper.html#a1c108a8743c168d71c9731e5e9f63596">operator==</a> (<a class="el" href="class_tf_py_obj_wrapper.html">TfPyObjWrapper</a> const &amp;other) const</td></tr>
<tr class="memdesc:a1c108a8743c168d71c9731e5e9f63596"><td class="mdescLeft">&#160;</td><td class="mdescRight">Equality.  <a href="#a1c108a8743c168d71c9731e5e9f63596">More...</a><br /></td></tr>
<tr class="separator:a1c108a8743c168d71c9731e5e9f63596"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9250e102e555cde5d6c968dfe831456"><td class="memItemLeft" align="right" valign="top">TF_API bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tf_py_obj_wrapper.html#ac9250e102e555cde5d6c968dfe831456">operator!=</a> (<a class="el" href="class_tf_py_obj_wrapper.html">TfPyObjWrapper</a> const &amp;other) const</td></tr>
<tr class="memdesc:ac9250e102e555cde5d6c968dfe831456"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inequality.  <a href="#ac9250e102e555cde5d6c968dfe831456">More...</a><br /></td></tr>
<tr class="separator:ac9250e102e555cde5d6c968dfe831456"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:adf97220346a88ce80ed30522b5f6fc6f"><td class="memItemLeft" align="right" valign="top"><a id="adf97220346a88ce80ed30522b5f6fc6f"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>boost::python::api::object_operators&lt; TfPyObjWrapper &gt;</b></td></tr>
<tr class="separator:adf97220346a88ce80ed30522b5f6fc6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6aebe877436befd00564de5a48c897c5"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tf_py_obj_wrapper.html#a6aebe877436befd00564de5a48c897c5">hash_value</a> (<a class="el" href="class_tf_py_obj_wrapper.html">TfPyObjWrapper</a> const &amp;o)</td></tr>
<tr class="memdesc:a6aebe877436befd00564de5a48c897c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Produce a hash code for this object.  <a href="#a6aebe877436befd00564de5a48c897c5">More...</a><br /></td></tr>
<tr class="separator:a6aebe877436befd00564de5a48c897c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Boost Python object wrapper. </p>
<p>Provides a wrapper around boost::python::object that works correctly for the following basic operations regardless of the GIL state: default construction, copy construction, assignment, (in)equality comparison, <a class="el" href="class_tf_py_obj_wrapper.html#a6aebe877436befd00564de5a48c897c5" title="Produce a hash code for this object.">hash_value()</a>, and destruction.</p>
<p>None of those work correctly in the presence of an unlocked GIL for boost::python::object. This class only actually acquires the GIL for default construction, destruction and for some (in)equality comparisons. The other operations do not require taking the GIL.</p>
<p>This is primarily useful in cases where a boost::python::object might be destroyed without a locked GIL by a client blind to that fact. This occurs when a registry, for example, holds type-erased objects. If one of the type-erased objects in the registry happens to hold a boost::python::object, that type-erased object must be destroyed while the GIL is held but it's unreasonable to require that the registry know that. This class helps solve that problem.</p>
<p>This class also provides many of the operators that boost::python::object provides, by virtue of deriving from boost::python::api::object_operators&lt;T&gt;. However it is important to note that callers must ensure the GIL is held before using these operators! </p>

<p class="definition">Definition at line <a class="el" href="py_obj_wrapper_8h_source.html#l00095">95</a> of file <a class="el" href="py_obj_wrapper_8h_source.html">pyObjWrapper.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="ad9e36ff89e234ccad53d4618dc5fa475"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9e36ff89e234ccad53d4618dc5fa475">&#9670;&nbsp;</a></span>TfPyObjWrapper() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TF_API <a class="el" href="class_tf_py_obj_wrapper.html">TfPyObjWrapper</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default construct a <a class="el" href="class_tf_py_obj_wrapper.html" title="Boost Python object wrapper.">TfPyObjWrapper</a> holding a reference to python None. </p>
<p>The GIL need not be held by the caller. </p>

</div>
</div>
<a id="af5b9924c62126e5aeb241d21cb9a3295"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5b9924c62126e5aeb241d21cb9a3295">&#9670;&nbsp;</a></span>TfPyObjWrapper() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TF_API <a class="el" href="class_tf_py_obj_wrapper.html">TfPyObjWrapper</a> </td>
          <td>(</td>
          <td class="paramtype">object&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Construct a TfPyObjectWrapper wrapping <em>obj</em>. </p>
<p>The GIL must be held by the caller. Note, allowing the implicit conversion is intended here. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a115702fc3cb62a3c3bf4b3c89f3bc373"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a115702fc3cb62a3c3bf4b3c89f3bc373">&#9670;&nbsp;</a></span>Get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">object const&amp; Get </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Underlying object access. </p>
<p>This method returns a reference, so technically, the GIL need not be held to call this. However, the caller is strongly advised to ensure the GIL is held, since assigning this object to another or otherwise operating on the returned object requires it. </p>

<p class="definition">Definition at line <a class="el" href="py_obj_wrapper_8h_source.html#l00116">116</a> of file <a class="el" href="py_obj_wrapper_8h_source.html">pyObjWrapper.h</a>.</p>

</div>
</div>
<a id="ac9250e102e555cde5d6c968dfe831456"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9250e102e555cde5d6c968dfe831456">&#9670;&nbsp;</a></span>operator!=()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TF_API bool operator!= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tf_py_obj_wrapper.html">TfPyObjWrapper</a> const &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Inequality. </p>
<p>Returns false if <em>other</em> refers to the same python object. </p>

</div>
</div>
<a id="a1c108a8743c168d71c9731e5e9f63596"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c108a8743c168d71c9731e5e9f63596">&#9670;&nbsp;</a></span>operator==()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TF_API bool operator== </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tf_py_obj_wrapper.html">TfPyObjWrapper</a> const &amp;&#160;</td>
          <td class="paramname"><em>other</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Equality. </p>
<p>Returns true if <em>other</em> refers to the same python object. </p>

</div>
</div>
<a id="aeddca8ee3f8a757ae8fdf114260df477"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeddca8ee3f8a757ae8fdf114260df477">&#9670;&nbsp;</a></span>ptr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TF_API PyObject* ptr </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Underlying PyObject* access. </p>
<p>This method returns a pointer, so technically, the GIL need not be held to call this. However, the caller is strongly advised to ensure the GIL is held, since assigning this object to another or otherwise operating on the returned object requires it. The returned PyObject * is a "borrowed reference", meaning that the underlying object's reference count has not been incremented on behalf of the caller. </p>

</div>
</div>
<h2 class="groupheader">Friends And Related Function Documentation</h2>
<a id="a6aebe877436befd00564de5a48c897c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6aebe877436befd00564de5a48c897c5">&#9670;&nbsp;</a></span>hash_value</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t hash_value </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_tf_py_obj_wrapper.html">TfPyObjWrapper</a> const &amp;&#160;</td>
          <td class="paramname"><em>o</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">friend</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Produce a hash code for this object. </p>
<p>Note that this does not attempt to hash the underlying python object, it returns a hash code that's suitable for hash-table lookup of <a class="el" href="class_tf_py_obj_wrapper.html" title="Boost Python object wrapper.">TfPyObjWrapper</a> instances, and does not require taking the python lock. </p>

<p class="definition">Definition at line <a class="el" href="py_obj_wrapper_8h_source.html#l00133">133</a> of file <a class="el" href="py_obj_wrapper_8h_source.html">pyObjWrapper.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>pxr/base/tf/<a class="el" href="py_obj_wrapper_8h_source.html">pyObjWrapper.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.6-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_tf_py_obj_wrapper.html">TfPyObjWrapper</a></li>
    <li class="footer">&copy; Copyright 2023, Pixar Animation Studios. Generated on Mon Nov 20 2023 16:07:05 by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>