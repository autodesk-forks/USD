<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Universal Scene Description: pxr/base/arch/export.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="usd_style.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="https://openusd.org/images/USDIcon.ico"/>
<!-- ... other metadata & script includes ... -->
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
</script>
<!-- Add warning banner to top of page if current page isn't the release version -->
<script>
function AddWarningBanner() 
{
  // Get current URL
  const loc = new URL(location.href);
  // Look for URL of the format "<USD hostname>/<version|dev|release>/api/<file.html>"
  // NOTE: If versioning approach ever changes, this will need updating
  var apiIndex = loc.pathname.indexOf("/api/");
  if (apiIndex >= 0) {
    // Truncate "/api/..." off path to get preceding path and "/" index
    var truncString = loc.pathname.slice(0,apiIndex);
    // Get index of first "/" before "/api/"
    var preApiIndex = truncString.lastIndexOf("/");
    var verString = truncString.slice(preApiIndex + 1);
    // if the current page isn't the release version, add a warning banner 
    if (verString !== "release") {
      // Create alternate "release" URL for page
      // NOTE: This won't always be a valid URL, e.g. if dev release has a brand new page
      var relURL = loc.pathname.substring(0,preApiIndex) + "/release" + loc.pathname.substring(apiIndex);
      var banner = document.createElement("div");
      banner.className = "non_release_version_warning";
      if (verString === "dev") {
        banner.innerHTML = "This document is for a version of USD that is under development. See <a href='" + relURL + "'>this page</a> for the current release.";
      } else {
        // For now, we assume any other string is an older version string
        banner.innerHTML = "This document is for an older version of USD. See <a href='" + relURL + "'>this page</a> for the current release.";
      }
      document.body.insertBefore(banner,document.body.childNodes[0]);
    }
  }
} 
</script>
</head>
<body onload="AddWarningBanner()">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="USDLogoDocs.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('export_8h.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a>  </div>
  <div class="headertitle">
<div class="title">export.h File Reference<div class="ingroups"><a class="el" href="group__group__arch___symbol_visibility.html">Symbol Visibility</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Defines symbol visibility macros.  
<a href="#details">More...</a></p>
<div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for export.h:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="export_8h__incl.png" border="0" usemap="#pxr_2base_2arch_2export_8h" alt=""/></div>
<map name="pxr_2base_2arch_2export_8h" id="pxr_2base_2arch_2export_8h">
<area shape="rect"  title="Defines symbol visibility macros." alt="" coords="8,5,176,32"/>
<area shape="rect"  href="defines_8h_source.html" title=" " alt="" coords="5,80,179,107"/>
</map>
</div>
</div>
<p><a href="export_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a1399e323eb4e9c91bd1ae0b403868540"><td class="memItemLeft" align="right" valign="top"><a id="a1399e323eb4e9c91bd1ae0b403868540"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ARCH_EXPORT</b></td></tr>
<tr class="separator:a1399e323eb4e9c91bd1ae0b403868540"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ab3df37c1520bcbd1dc4326ecdbcd02"><td class="memItemLeft" align="right" valign="top"><a id="a5ab3df37c1520bcbd1dc4326ecdbcd02"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ARCH_IMPORT</b></td></tr>
<tr class="separator:a5ab3df37c1520bcbd1dc4326ecdbcd02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9849ce9e395e8f65526eb98889cc1c00"><td class="memItemLeft" align="right" valign="top"><a id="a9849ce9e395e8f65526eb98889cc1c00"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ARCH_HIDDEN</b></td></tr>
<tr class="separator:a9849ce9e395e8f65526eb98889cc1c00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab96d43f5a83460242dde7a01dd3af20c"><td class="memItemLeft" align="right" valign="top"><a id="ab96d43f5a83460242dde7a01dd3af20c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ARCH_EXPORT_TYPE</b></td></tr>
<tr class="separator:ab96d43f5a83460242dde7a01dd3af20c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a419dcdfc98a29cc609282c1a436be37a"><td class="memItemLeft" align="right" valign="top"><a id="a419dcdfc98a29cc609282c1a436be37a"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ARCH_EXPORT_TEMPLATE</b>(type, ...)</td></tr>
<tr class="separator:a419dcdfc98a29cc609282c1a436be37a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d250b2c79477162c21106c092ea2b9c"><td class="memItemLeft" align="right" valign="top"><a id="a1d250b2c79477162c21106c092ea2b9c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>ARCH_IMPORT_TEMPLATE</b>(type, ...)&#160;&#160;&#160;extern template type ARCH_IMPORT __VA_ARGS__</td></tr>
<tr class="separator:a1d250b2c79477162c21106c092ea2b9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Defines symbol visibility macros. </p>
<p>Defines <code>ARCH_EXPORT</code> to indicate a symbol should be exported from a library, <code>ARCH_IMPORT</code> to indicate an exported symbol should be imported (which only matters on Windows), and <code>ARCH_HIDDEN</code> to indicate that a symbol which would be exported should not be.</p>
<p>The correct way to use these macros is for each library to make a header that looks like this (for some hypothetical library named foo):</p>
<div class="fragment"><div class="line"><span class="preprocessor">#ifndef FOO_API_H</span></div><div class="line"><span class="preprocessor">#define FOO_API_H</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="export_8h.html">pxr/base/arch/export.h</a>&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#if defined(FOO_STATIC)</span></div><div class="line"><span class="preprocessor">#   define FOO_API</span></div><div class="line"><span class="preprocessor">#   define FOO_API_TEMPLATE_CLASS(...)</span></div><div class="line"><span class="preprocessor">#   define FOO_API_TEMPLATE_STRUCT(...)</span></div><div class="line"><span class="preprocessor">#   define FOO_LOCAL</span></div><div class="line"><span class="preprocessor">#else</span></div><div class="line"><span class="preprocessor">#   if defined(FOO_EXPORTS)</span></div><div class="line"><span class="preprocessor">#       define FOO_API ARCH_EXPORT</span></div><div class="line"><span class="preprocessor">#       define FOO_API_TEMPLATE_CLASS(...) ARCH_EXPORT_TEMPLATE(class, __VA_ARGS__)</span></div><div class="line"><span class="preprocessor">#       define FOO_API_TEMPLATE_STRUCT(...) ARCH_EXPORT_TEMPLATE(struct, __VA_ARGS__)</span></div><div class="line"><span class="preprocessor">#   else</span></div><div class="line"><span class="preprocessor">#       define FOO_API ARCH_IMPORT</span></div><div class="line"><span class="preprocessor">#       define FOO_API_TEMPLATE_CLASS(...) ARCH_IMPORT_TEMPLATE(class, __VA_ARGS__)</span></div><div class="line"><span class="preprocessor">#       define FOO_API_TEMPLATE_STRUCT(...) ARCH_IMPORT_TEMPLATE(struct, __VA_ARGS__)</span></div><div class="line"><span class="preprocessor">#   endif</span></div><div class="line"><span class="preprocessor">#   define FOO_LOCAL ARCH_HIDDEN</span></div><div class="line"><span class="preprocessor">#endif</span></div><div class="line"></div><div class="line"><span class="preprocessor">#endif</span></div></div><!-- fragment --><p>Note that every library has its own unique _API and _LOCAL macros and the expansion of these macros depends on whether the library is being built or used (indicated by the externally set macro FOO_EXPORTS).</p>
<p>Library headers then include this header and mark classes, methods, functions and variables as part of the API or local. Each case is described below.</p>
<p>A class is added to the API like this:</p>
<div class="fragment"><div class="line"><span class="keyword">class </span>FOO_API FooClass ...</div></div><!-- fragment --><p>This will add every member to the API, including implicitly created members like a default constructor, default assignment, the vtable and the type_info. The type_info is especially important. If you will dynamic_cast to the type or catch an exception using the type outside of the library, you <b>must</b> put its type_info into the API. To export the vtable &amp; type_info specifically, use <code>ARCH_EXPORT_TYPE</code>. However, due to compiler limitations, ARCH_EXPORT_TYPE may put the whole class into the API as if ARCH_EXPORT were used.</p>
<p>Note that template classes do not get added to the API that way. Instead they are added when explicitly instantiated like so:</p>
<div class="fragment"><div class="line"><span class="keyword">template</span> <span class="keyword">class </span>FOO_API FooTemplateClass&lt;FooArgType&gt;;</div></div><!-- fragment --><p>It's also sometimes necessary to indicate that an instantiation exists in the API and that a client should not do any of its own instantiation. This is necessary, for example, when the template has static data members and is done by using extern template in the header file that provides the type. Two of the macros above will do that:</p>
<div class="fragment"><div class="line">FOO_API_TEMPLATE_CLASS(FooTemplateClass&lt;FooArgType&gt;);</div><div class="line">FOO_API_TEMPLATE_STRUCT(FooTemplateClass&lt;FooArgType&gt;);</div></div><!-- fragment --><p>Which you use depends on if FooTemplateClass is a class or struct. The macro is used because we don't want to always use extern template, but only when we're importing a dynamic library.</p>
<p>A template that is completely inlined does not need to be added to the API since it's simply instantiated where needed.</p>
<p>Functions, methods and variables can also be put into the API:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>FooLocalClass {</div><div class="line">  ~FooLocalClass();</div><div class="line">  FOO_API <span class="keywordtype">void</span> MoveTheThing();</div><div class="line">};</div><div class="line">FOO_API FooLocalClass* FooNewThing();</div><div class="line">FOO_API <span class="keyword">extern</span> <span class="keywordtype">int</span> doNotUseGlobalVariables;</div></div><!-- fragment --><p>Just because FooLocalClass is not in the API doesn't mean clients can't have pointers and references to instances. What they can't do is call member functions not in the API (or, as indicated above, use RTTI for it). So, for example:</p>
<div class="fragment"><div class="line">FooLocalClass* thing = FooNewThing();</div><div class="line">thing-&gt;MoveTheThing();</div><div class="line">(void)dynamic_cast&lt;FooLocalClass*&gt;(thing); <span class="comment">// Link error!</span></div><div class="line"><span class="keyword">delete</span> thing; <span class="comment">// Link error!</span></div></div><!-- fragment --><p>Deleting the FooLocalClass instance attempts to use the (non-API) d'tor and fails to link. If we had an implicitly defined d'tor then the deletion would have worked, presuming FooLocalClass didn't have any data members with non-API d'tors.</p>
<p>A method of a class added to the API is itself in the API but on some platforms (i.e. not Windows) you can remove it from the API using FOO_LOCAL:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>FOO_API FooSemiAPI {</div><div class="line">    <span class="keywordtype">void</span> DoSomethingPublic();</div><div class="line">    FOO_LOCAL <span class="keywordtype">void</span> _DoSomethingPrivate();</div><div class="line">};</div></div><!-- fragment --><p>Clients of the library will fail to link if they use _DoSomethingPrivate() if FOO_LOCAL is supported. If not then the symbol will remain in the API. </p>

<p class="definition">Definition in file <a class="el" href="export_8h_source.html">export.h</a>.</p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.6-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_1d43f220d4da368b75944030615bc443.html">pxr</a></li><li class="navelem"><a class="el" href="dir_682898b56c69f5cabb813635d1588cf1.html">base</a></li><li class="navelem"><a class="el" href="dir_fe168490fe0be0917936adc4ecae1aa1.html">arch</a></li><li class="navelem"><a class="el" href="export_8h.html">export.h</a></li>
    <li class="footer">&copy; Copyright 2023, Pixar Animation Studios. Generated on Mon Nov 20 2023 16:06:53 by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>