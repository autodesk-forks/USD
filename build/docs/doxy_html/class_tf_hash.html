<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Universal Scene Description: TfHash Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="usd_style.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="https://openusd.org/images/USDIcon.ico"/>
<!-- ... other metadata & script includes ... -->
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
</script>
<!-- Add warning banner to top of page if current page isn't the release version -->
<script>
function AddWarningBanner() 
{
  // Get current URL
  const loc = new URL(location.href);
  // Look for URL of the format "<USD hostname>/<version|dev|release>/api/<file.html>"
  // NOTE: If versioning approach ever changes, this will need updating
  var apiIndex = loc.pathname.indexOf("/api/");
  if (apiIndex >= 0) {
    // Truncate "/api/..." off path to get preceding path and "/" index
    var truncString = loc.pathname.slice(0,apiIndex);
    // Get index of first "/" before "/api/"
    var preApiIndex = truncString.lastIndexOf("/");
    var verString = truncString.slice(preApiIndex + 1);
    // if the current page isn't the release version, add a warning banner 
    if (verString !== "release") {
      // Create alternate "release" URL for page
      // NOTE: This won't always be a valid URL, e.g. if dev release has a brand new page
      var relURL = loc.pathname.substring(0,preApiIndex) + "/release" + loc.pathname.substring(apiIndex);
      var banner = document.createElement("div");
      banner.className = "non_release_version_warning";
      if (verString === "dev") {
        banner.innerHTML = "This document is for a version of USD that is under development. See <a href='" + relURL + "'>this page</a> for the current release.";
      } else {
        // For now, we assume any other string is an older version string
        banner.innerHTML = "This document is for an older version of USD. See <a href='" + relURL + "'>this page</a> for the current release.";
      }
      document.body.insertBefore(banner,document.body.childNodes[0]);
    }
  }
} 
</script>
</head>
<body onload="AddWarningBanner()">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="USDLogoDocs.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_tf_hash.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="class_tf_hash-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">TfHash Class Reference<div class="ingroups"><a class="el" href="group__group__tf___string.html">String Utilities</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>A user-extensible hashing mechanism for use with runtime hash tables.  
 <a href="class_tf_hash.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a14c8bb7640e0f3cde024a5ad166843f4"><td class="memTemplParams" colspan="2">template&lt;class T &gt; </td></tr>
<tr class="memitem:a14c8bb7640e0f3cde024a5ad166843f4"><td class="memTemplItemLeft" align="right" valign="top">auto&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="class_tf_hash.html#a14c8bb7640e0f3cde024a5ad166843f4">operator()</a> (T &amp;&amp;obj) const -&gt; decltype(Tf_HashImpl(std::declval&lt; Tf_HashState &amp; &gt;(), std::forward&lt; T &gt;(obj), 0), size_t())</td></tr>
<tr class="memdesc:a14c8bb7640e0f3cde024a5ad166843f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Produce a hash code for <code>obj</code>.  <a href="#a14c8bb7640e0f3cde024a5ad166843f4">More...</a><br /></td></tr>
<tr class="separator:a14c8bb7640e0f3cde024a5ad166843f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a0eb80aa560c0cac8805bdb99b7691113"><td class="memTemplParams" colspan="2">template&lt;class... Args&gt; </td></tr>
<tr class="memitem:a0eb80aa560c0cac8805bdb99b7691113"><td class="memTemplItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="class_tf_hash.html#a0eb80aa560c0cac8805bdb99b7691113">Combine</a> (Args &amp;&amp;... args)</td></tr>
<tr class="memdesc:a0eb80aa560c0cac8805bdb99b7691113"><td class="mdescLeft">&#160;</td><td class="mdescRight">Produce a hash code by combining the hash codes of several objects.  <a href="#a0eb80aa560c0cac8805bdb99b7691113">More...</a><br /></td></tr>
<tr class="separator:a0eb80aa560c0cac8805bdb99b7691113"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A user-extensible hashing mechanism for use with runtime hash tables. </p>
<p>The hash functions here are appropriate for storing objects in runtime hash tables. They are not appropriate for document signatures / fingerprinting or for storage and offline use. No specific guarantee is made about hash function quality, and the resulting hash codes are only 64-bits wide. Callers must assume that collisions will occur and be prepared to deal with them.</p>
<p>Additionally, no guarantee is made about repeatability from run-to-run. That is, within a process lifetime an object's hash code will not change (provided its internal state does not change). But an object with equivalent state in a future run of the same process may hash differently.</p>
<p>At the time of this writing we observe good performance combined with the "avalanche" quality (~50% output bit flip probability for a single input bit flip) in the low-order 40 output bits. Higher order bits do not achieve avalanche, and the highest order 8 bits are particularly poor. But for our purposes we deem this performance/quality tradeoff acceptable.</p>
<p>This mechanism has builtin support for integral and floating point types, some STL types and types in Tf. <a class="el" href="class_tf_hash.html" title="A user-extensible hashing mechanism for use with runtime hash tables.">TfHash</a> uses three methods to attempt to hash a passed object. First, <a class="el" href="class_tf_hash.html" title="A user-extensible hashing mechanism for use with runtime hash tables.">TfHash</a> tries to call TfHashAppend() on its argument. This is the primary customization point for <a class="el" href="class_tf_hash.html" title="A user-extensible hashing mechanism for use with runtime hash tables.">TfHash</a>. If that is not viable, <a class="el" href="class_tf_hash.html" title="A user-extensible hashing mechanism for use with runtime hash tables.">TfHash</a> makes an unqualified call to <a class="el" href="half_8h.html#a46cd4803c1efd2558d7a291d7c288ab3" title="Overload hash_value for half.">hash_value()</a>. We would like <a class="el" href="class_tf_hash.html" title="A user-extensible hashing mechanism for use with runtime hash tables.">TfHash</a> to try to use std::hash&lt;T&gt; next, but std::hash&lt;T&gt; is not SFINAE-friendly until c++17, and this code needs to support c++14.</p>
<p>The best way to add <a class="el" href="class_tf_hash.html" title="A user-extensible hashing mechanism for use with runtime hash tables.">TfHash</a> support for user-defined types is to provide a function overload like the following.</p>
<div class="fragment"><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> HashState&gt;</div><div class="line"><span class="keywordtype">void</span> TfHashAppend(HashState &amp;h, MyType <span class="keyword">const</span> &amp;myObj)</div><div class="line">    h.Append(myObject._member1,</div><div class="line">             myObject._member2,</div><div class="line">             myObject._member3);</div><div class="line">    h.AppendContiguous(myObject._memberArray, myObject._numArrayElems);</div><div class="line">}</div></div><!-- fragment --><p>The HashState object is left deliberately unspecified, so that different hash state objects may be used in different circumstances without modifying this support code, and without excess abstraction penalty. The methods available for use in TfHashAppend overloads are:</p>
<div class="fragment"><div class="line"><span class="comment">// Append several objects to the hash state.  This invokes the TfHash</span></div><div class="line"><span class="comment">// mechanism so it works for any types supported by TfHash.</span></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span>... Args&gt;</div><div class="line"><span class="keywordtype">void</span> HashState::Append(Args &amp;&amp;... args);</div><div class="line"></div><div class="line"><span class="comment">// Append contiguous objects to the hash state.  Note that this is</span></div><div class="line"><span class="comment">// explicitly *not* guaranteed to produce the same result as calling</span></div><div class="line"><span class="comment">// Append() with each object in order.</span></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> T&gt;</div><div class="line"><span class="keywordtype">void</span> HashState::AppendContiguous(T <span class="keyword">const</span> *objects, <span class="keywordtype">size_t</span> numObjects);</div><div class="line"></div><div class="line"><span class="comment">// Append a general range of objects to the hash state.  Note that this is</span></div><div class="line"><span class="comment">// explicitly *not* guaranteed to produce the same result as calling</span></div><div class="line"><span class="comment">// Append() with each object in order.</span></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">class</span> Iter&gt;</div><div class="line"><span class="keywordtype">void</span> AppendRange(Iter f, Iter l);</div></div><!-- fragment --><p>The <code><a class="el" href="class_tf_hash.html" title="A user-extensible hashing mechanism for use with runtime hash tables.">TfHash</a></code> class function object supports: </p><ul>
<li>integral types (including bool) </li>
<li>floating point types </li>
<li>std::string </li>
<li><a class="el" href="class_tf_ref_ptr.html" title="Reference-counted smart pointer utility class.">TfRefPtr</a> </li>
<li><a class="el" href="class_tf_weak_ptr.html" title="Pointer storage with deletion detection.">TfWeakPtr</a> </li>
<li><a class="el" href="class_tf_enum.html" title="An enum class that records both enum type and enum value.">TfEnum</a> </li>
<li>const void* </li>
<li>types that provide overloads for TfHashAppend </li>
<li>types that provide overloads for hash_value</li>
</ul>
<p>The <code><a class="el" href="class_tf_hash.html" title="A user-extensible hashing mechanism for use with runtime hash tables.">TfHash</a></code> class can be used to instantiate a <code>TfHashMap</code> with <code>string</code> keys as follows: </p><div class="fragment"><div class="line">TfHashMap&lt;string, int, TfHash&gt; m;</div><div class="line">m[<span class="stringliteral">&quot;abc&quot;</span>] = 1;</div></div><!-- fragment --><p><code><a class="el" href="class_tf_hash.html" title="A user-extensible hashing mechanism for use with runtime hash tables.">TfHash()</a></code>(const char*) is disallowed to avoid confusion of whether the pointer or the string is being hashed. If you want to hash a C-string use <code><a class="el" href="struct_tf_hash_c_string.html" title="A hash function object that hashes null-terminated c-string content.">TfHashCString</a></code> and if you want to hash a <code>char*</code> use <code><a class="el" href="struct_tf_hash_char_ptr.html" title="A hash function object that hashes the address of a char pointer.">TfHashCharPtr</a></code>. </p>

<p class="definition">Definition at line <a class="el" href="tf_2hash_8h_source.html#l00504">504</a> of file <a class="el" href="tf_2hash_8h_source.html">hash.h</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a0eb80aa560c0cac8805bdb99b7691113"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0eb80aa560c0cac8805bdb99b7691113">&#9670;&nbsp;</a></span>Combine()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static size_t Combine </td>
          <td>(</td>
          <td class="paramtype">Args &amp;&amp;...&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Produce a hash code by combining the hash codes of several objects. </p>

<p class="definition">Definition at line <a class="el" href="tf_2hash_8h_source.html#l00519">519</a> of file <a class="el" href="tf_2hash_8h_source.html">hash.h</a>.</p>

</div>
</div>
<a id="a14c8bb7640e0f3cde024a5ad166843f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14c8bb7640e0f3cde024a5ad166843f4">&#9670;&nbsp;</a></span>operator()()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto operator() </td>
          <td>(</td>
          <td class="paramtype">T &amp;&amp;&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td> const -&gt; decltype(Tf_HashImpl(std::declval&lt;Tf_HashState &amp;&gt;(),
                             std::forward&lt;T&gt;(obj), 0), size_t()) </td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Produce a hash code for <code>obj</code>. </p>
<p>See the class documentation for details. </p>

<p class="definition">Definition at line <a class="el" href="tf_2hash_8h_source.html#l00509">509</a> of file <a class="el" href="tf_2hash_8h_source.html">hash.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>pxr/base/tf/<a class="el" href="tf_2hash_8h_source.html">hash.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.6-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_tf_hash.html">TfHash</a></li>
    <li class="footer">&copy; Copyright 2023, Pixar Animation Studios. Generated on Mon Nov 20 2023 16:07:04 by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>