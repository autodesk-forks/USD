<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Universal Scene Description: UsdLux : USD Lighting Schema</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="usd_style.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="https://openusd.org/images/USDIcon.ico"/>
<!-- ... other metadata & script includes ... -->
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
</script>
<!-- Add warning banner to top of page if current page isn't the release version -->
<script>
function AddWarningBanner() 
{
  // Get current URL
  const loc = new URL(location.href);
  // Look for URL of the format "<USD hostname>/<version|dev|release>/api/<file.html>"
  // NOTE: If versioning approach ever changes, this will need updating
  var apiIndex = loc.pathname.indexOf("/api/");
  if (apiIndex >= 0) {
    // Truncate "/api/..." off path to get preceding path and "/" index
    var truncString = loc.pathname.slice(0,apiIndex);
    // Get index of first "/" before "/api/"
    var preApiIndex = truncString.lastIndexOf("/");
    var verString = truncString.slice(preApiIndex + 1);
    // if the current page isn't the release version, add a warning banner 
    if (verString !== "release") {
      // Create alternate "release" URL for page
      // NOTE: This won't always be a valid URL, e.g. if dev release has a brand new page
      var relURL = loc.pathname.substring(0,preApiIndex) + "/release" + loc.pathname.substring(apiIndex);
      var banner = document.createElement("div");
      banner.className = "non_release_version_warning";
      if (verString === "dev") {
        banner.innerHTML = "This document is for a version of USD that is under development. See <a href='" + relURL + "'>this page</a> for the current release.";
      } else {
        // For now, we assume any other string is an older version string
        banner.innerHTML = "This document is for an older version of USD. See <a href='" + relURL + "'>this page</a> for the current release.";
      }
      document.body.insertBefore(banner,document.body.childNodes[0]);
    }
  }
} 
</script>
</head>
<body onload="AddWarningBanner()">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="USDLogoDocs.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('usd_lux_page_front.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">UsdLux : USD Lighting Schema </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="usdLux_overview"></a>
Overview</h1>
<p>UsdLux provides a representation for lights and related components that are common to many graphics environments and therefore suitable for interchange.</p>
<p>The goal of UsdLux is to serve as a basis for:</p>
<ul>
<li>passing lighting setups from a creation environment to a renderer</li>
<li>best-effort portability of setups across environments, to the degree that they share capabilities</li>
</ul>
<p>The UsdLux core includes:</p>
<ul>
<li>common light types<ul>
<li><a class="el" href="class_usd_lux_cylinder_light.html" title="Light emitted outward from a cylinder.">UsdLuxCylinderLight</a></li>
<li><a class="el" href="class_usd_lux_disk_light.html" title="Light emitted from one side of a circular disk.">UsdLuxDiskLight</a></li>
<li><a class="el" href="class_usd_lux_distant_light.html" title="Light emitted from a distant source along the -Z axis.">UsdLuxDistantLight</a></li>
<li><a class="el" href="class_usd_lux_dome_light.html" title="Light emitted inward from a distant external environment, such as a sky or IBL light probe.">UsdLuxDomeLight</a></li>
<li><a class="el" href="class_usd_lux_rect_light.html" title="Light emitted from one side of a rectangle.">UsdLuxRectLight</a></li>
<li><a class="el" href="class_usd_lux_sphere_light.html" title="Light emitted outward from a sphere.">UsdLuxSphereLight</a></li>
</ul>
</li>
<li>common light attributes<ul>
<li><em>power:</em> intensity and exposure</li>
<li><em>color:</em> as RGB components and/or color temperature</li>
</ul>
</li>
<li>base classes for common lights<ul>
<li><a class="el" href="class_usd_lux_boundable_light_base.html" title="Base class for intrinsic lights that are boundable.">UsdLuxBoundableLightBase</a>: lights that inherit from <a class="el" href="class_usd_geom_boundable.html" title="Boundable introduces the ability for a prim to persistently cache a rectilinear, local-space,...">UsdGeomBoundable</a></li>
<li><a class="el" href="class_usd_lux_nonboundable_light_base.html" title="Base class for intrinsic lights that are not boundable.">UsdLuxNonboundableLightBase</a>: lights that inherit from <a class="el" href="class_usd_geom_xformable.html" title="Base class for all transformable prims, which allows arbitrary sequences of component affine transfor...">UsdGeomXformable</a></li>
</ul>
</li>
<li>API classes for imparting the behavior of "being a light" to any <a class="el" href="class_usd_geom_xformable.html" title="Base class for all transformable prims, which allows arbitrary sequences of component affine transfor...">UsdGeomXformable</a> derived prim type<ul>
<li><a class="el" href="class_usd_lux_light_a_p_i.html" title="API schema that imparts the quality of being a light onto a prim.">UsdLuxLightAPI</a>: makes a prim "be a light" and adds common light attributes</li>
<li><a class="el" href="class_usd_lux_mesh_light_a_p_i.html" title="This is the preferred API schema to apply to Mesh type prims when adding light behaviors to a mesh.">UsdLuxMeshLightAPI</a>: extends <a class="el" href="class_usd_lux_light_a_p_i.html" title="API schema that imparts the quality of being a light onto a prim.">UsdLuxLightAPI</a> for application to <a class="el" href="class_usd_geom_mesh.html" title="Encodes a mesh with optional subdivision properties and features.">UsdGeomMesh</a></li>
<li><a class="el" href="class_usd_lux_volume_light_a_p_i.html" title="This is the preferred API schema to apply to Volume type prims when adding light behaviors to a volum...">UsdLuxVolumeLightAPI</a>: extends <a class="el" href="class_usd_lux_light_a_p_i.html" title="API schema that imparts the quality of being a light onto a prim.">UsdLuxLightAPI</a> for application to <a class="el" href="class_usd_vol_volume.html" title="A renderable volume primitive.">UsdVolVolume</a></li>
</ul>
</li>
<li>API classes embodying more complex behaviors<ul>
<li><a class="el" href="class_usd_lux_light_list_a_p_i.html" title="API schema to support discovery and publishing of lights in a scene.">UsdLuxLightListAPI</a>: light component enumeration and discovery</li>
<li><a class="el" href="class_usd_collection_a_p_i.html" title="This is a general purpose API schema, used to describe a collection of heterogeneous objects within t...">UsdCollectionAPI</a>: light-object linking</li>
<li><a class="el" href="class_usd_lux_shadow_a_p_i.html" title="Controls to refine a light&#39;s shadow behavior.">UsdLuxShadowAPI</a>: shadow-linking and falloff</li>
<li><a class="el" href="class_usd_lux_shaping_a_p_i.html" title="Controls for shaping a light&#39;s emission.">UsdLuxShapingAPI</a>: focus, cone angle, and IES profiles</li>
</ul>
</li>
<li>associated components for adjusting behavior<ul>
<li><a class="el" href="class_usd_lux_light_filter.html" title="A light filter modifies the effect of a light.">UsdLuxLightFilter</a>: a filter to modulate the effect of lights</li>
<li><a class="el" href="class_usd_lux_portal_light.html" title="A rectangular portal in the local XY plane that guides sampling of a dome light.">UsdLuxPortalLight</a>: a portal to guide sampling of a dome light</li>
</ul>
</li>
<li><a class="el" href="usd_lux_page_front.html#usdLux_PluginSchemas">plugin types</a>:<ul>
<li><a class="el" href="class_usd_lux_plugin_light.html" title="Light that provides properties that allow it to identify an external SdrShadingNode definition,...">UsdLuxPluginLight</a></li>
<li><a class="el" href="class_usd_lux_plugin_light_filter.html" title="Light filter that provides properties that allow it to identify an external SdrShadingNode definition...">UsdLuxPluginLightFilter</a></li>
</ul>
</li>
</ul>
<p>This core can be extended to add more types of lights, filters, or other features.</p>
<p>For a comprehensive list of the types see the full <a href="hierarchy.html">class hierarchy</a>.</p>
<h1><a class="anchor" id="usdLux_Notes"></a>
Design Notes and Usage Guide</h1>
<h2><a class="anchor" id="usdLux_LightAPIAndBeingALight"></a>
LightAPI and "Being a Light"</h2>
<p><a class="el" href="class_usd_lux_light_a_p_i.html" title="API schema that imparts the quality of being a light onto a prim.">UsdLuxLightAPI</a> defines all the common attributes and behaviors that are considered to be core to all lights. Thus, we define a <em>UsdLux light</em> as any prim that has a <a class="el" href="class_usd_lux_light_a_p_i.html" title="API schema that imparts the quality of being a light onto a prim.">UsdLuxLightAPI</a> applied. In other words, applying a <a class="el" href="class_usd_lux_light_a_p_i.html" title="API schema that imparts the quality of being a light onto a prim.">UsdLuxLightAPI</a> imparts the quality of "being a light" to a prim.</p>
<p>Most light types, such as <a class="el" href="class_usd_lux_rect_light.html" title="Light emitted from one side of a rectangle.">UsdLuxRectLight</a> or any type that inherits from <a class="el" href="class_usd_lux_boundable_light_base.html" title="Base class for intrinsic lights that are boundable.">UsdLuxBoundableLightBase</a> or <a class="el" href="class_usd_lux_nonboundable_light_base.html" title="Base class for intrinsic lights that are not boundable.">UsdLuxNonboundableLightBase</a>, have an applied <a class="el" href="class_usd_lux_light_a_p_i.html" title="API schema that imparts the quality of being a light onto a prim.">UsdLuxLightAPI</a> automatically <a class="el" href="_usd__page__generating_schemas.html#Usd_BuiltinAPISchemas">built in</a> to their type and therefore will always be lights. However, by attaching the quality of being a light to an applied API schema, we can turn any geometry into a light by applying a <a class="el" href="class_usd_lux_light_a_p_i.html" title="API schema that imparts the quality of being a light onto a prim.">UsdLuxLightAPI</a> to it, or, as we would in the case of a <a class="el" href="class_usd_geom_mesh.html" title="Encodes a mesh with optional subdivision properties and features.">UsdGeomMesh</a> to which we'd apply <a class="el" href="class_usd_lux_mesh_light_a_p_i.html" title="This is the preferred API schema to apply to Mesh type prims when adding light behaviors to a mesh.">UsdLuxMeshLightAPI</a>, by applying an API schema that itself has a built-in <a class="el" href="class_usd_lux_light_a_p_i.html" title="API schema that imparts the quality of being a light onto a prim.">UsdLuxLightAPI</a>.</p>
<h2><a class="anchor" id="usdLux_Geometry"></a>
Geometry</h2>
<p>By convention, lights with a primary axis emit along -Z. Area lights are centered in the XY plane and are 1 unit in diameter.</p>
<p>UsdLux objects are <a class="el" href="class_usd_geom_xformable.html" title="Base class for all transformable prims, which allows arbitrary sequences of component affine transfor...">UsdGeomXformable</a>, so they use its set of transform operators, and inherit transforms hierarchically. It is recommended that only translation and rotations be used with the lights, to avoid introducing difficulties for light sampling and integration. Lights have explicit attributes to adjust their size.</p>
<p>UsdLux provides the <a class="el" href="class_usd_lux_light_a_p_i.html" title="API schema that imparts the quality of being a light onto a prim.">UsdLuxLightAPI</a>, which can be applied to arbitrary user-supplied geometry, as well as concrete lights for specific shapes: spheres, rectangles, disks, and cylinders. The specific shapes exist because they can support superior, analytic sampling methods.</p>
<p>UsdLux is designed primarily for physically-based cinematic lighting with area lights. Accordingly, it does not include zero-area point or line lights. However, some backends benefit from a point or line approximation. This intent can be indicated using the treatAsPoint and treatAsLine attributes on UsdSphereLight and UsdCylinderLight. These attributes are hints that avoid the need for backends to use heuristics (such as an arbitrary epsilon threshold) to determine the approximation. These hints can be set at the time of creation (or export) where the most information about the visual intent exists.</p>
<p>UsdLux does not provide support for expressing live transform constraints, such as to attach lights to moving geometry. This is consistent with USD's policy of storing the computed result of rigging, not the rigging itself.</p>
<h2><a class="anchor" id="usdLux_Behavior"></a>
Properties &amp; Behavior</h2>
<p>Colors specified in attributes are in energy-linear terms, and obey the USD convention for indicating their color space via <code>colorConfiguration</code> and <code>colorSpace</code> metadata. See <a class="el" href="class_usd_stage.html#aaff338cb37de09b0fa70ea0e693c9cd2" title="Sets the default color configuration to be used to interpret the per-attribute color-spaces in the co...">UsdStage::SetColorConfiguration()</a> for discussion of colorspace management in USD.</p>
<p>UsdLux presumes a physically-based lighting model where falloff with distance is a consequence of reduced visible solid angle. Environments that do not measure the visible solid angle are expected to provide an approximation, such as inverse-square falloff. Further artistic control over attenuation can be modelled as light filters.</p>
<p>More complex behaviors are provided via a set of API classes. These behaviors are common and well-defined but may not be supported in all rendering environments. These API classes provide functions to specify the relevant semantic behavior:</p>
<ul>
<li><a class="el" href="class_usd_lux_light_list_a_p_i.html" title="API schema to support discovery and publishing of lights in a scene.">UsdLuxLightListAPI</a> provides a "light list" relationship to enumerate locations of known lights in the scene. It can be useful to enumerate lights without requiring full scene traversal. For example, some systems require lights to be declared before the rest of the scene. <a class="el" href="class_usd_lux_light_list_a_p_i.html" title="API schema to support discovery and publishing of lights in a scene.">UsdLuxLightListAPI</a> provides a way to compute this result ahead of time and store the result in a well-defined place. Pipeline integration of UsdLux can use this API to discover and publish lights at an appropriate time &ndash; such as export from any system where lights may be created.</li>
<li><a class="el" href="class_usd_collection_a_p_i.html" title="This is a general purpose API schema, used to describe a collection of heterogeneous objects within t...">UsdCollectionAPI</a> provides relationships to represent subsets of geometry to consider for illumination. These provide hierarchical inclusion and exclusion &ndash; for example, to illuminate a building but not a window within. UsdLux supports a concept of fractional illumination, allowing partial contribution from a light to a particular object, for rendering systems that support this.</li>
<li><a class="el" href="class_usd_lux_shadow_a_p_i.html" title="Controls to refine a light&#39;s shadow behavior.">UsdLuxShadowAPI</a> provides controls to refine shadow behavior in non-physical ways, including shadow linking, tinting, and falloff.</li>
<li><a class="el" href="class_usd_lux_shaping_a_p_i.html" title="Controls for shaping a light&#39;s emission.">UsdLuxShapingAPI</a> provides controls to shape light emission, including focus, cone-angle falloff, and IES profiles.</li>
</ul>
<h2><a class="anchor" id="Extensibility"></a>
Extensibility</h2>
<p>Like other USD schemas, UsdLux core may be extended to address features specific to certain environments. Possible renderer- or pipeline-specific capabilities that could be addded as extensions include:</p>
<ul>
<li>specialized light types<ul>
<li>point cloud lights</li>
<li>volumetric/voxel lights</li>
<li>procedural sky models</li>
<li>light probes, lightfields</li>
</ul>
</li>
<li>renderer-specific configuration<ul>
<li>arbitrary output variable images (AOV's) such as depth or normals</li>
<li>light path expressions (LPE's)</li>
<li>image post-processing effects</li>
<li>refraction and opacity approximations, such as thin shadows</li>
</ul>
</li>
<li>sampling and optimization tweaks<ul>
<li>light sample counts</li>
<li>importance multipliers</li>
<li>integrator path-depth limits</li>
</ul>
</li>
<li>constraint rigging to attach a light to an object</li>
</ul>
<p>We provide a utility to aide in extending the UsdLux core schemas, namely the schema generation script <em>usdgenschemafromsdr</em>. This script can be used to generate new light schemas from the shader nodes in the <a class="el" href="class_sdr_registry.html" title="The shading-specialized version of NdrRegistry.">SdrRegistry</a>. These light schemas can be typed schemas that describe a completely new light type or can be applied API schemas that extend an existing light type automatically by being specified to <a class="el" href="_usd__page__generating_schemas.html#Usd_AutoAppliedAPISchemas">auto apply</a> to an existing light (such as <a class="el" href="class_usd_lux_disk_light.html" title="Light emitted from one side of a circular disk.">UsdLuxDiskLight</a>) or light API (such as <a class="el" href="class_usd_lux_mesh_light_a_p_i.html" title="This is the preferred API schema to apply to Mesh type prims when adding light behaviors to a mesh.">UsdLuxMeshLightAPI</a>).</p>
<h2><a class="anchor" id="usdLux_PluginSchemas"></a>
Plugin Lights and Light Filters</h2>
<p>We expect "published, pipeline citizen" render delegates to provide codeless schema libraries that contain typed schemas and/or applied API schemas that define or extend all of the renderer's core light types. But some render delegates may be developed as part of a proprietary application package that is only using USD as a mechanism to communicate to that render delegate. In other words, the application doesn't really want to participate in the open USD ecosystem, but needs to use it for rendering scenes imported from USD and augmented using application/renderer-specific lighting features, or finds it useful to use USD as an archiving format to send jobs to a render-farm so that the full application need not be run there.</p>
<p>In order to lower the barrier somewhat for such applications, we provide <a class="el" href="class_usd_lux_plugin_light.html" title="Light that provides properties that allow it to identify an external SdrShadingNode definition,...">UsdLuxPluginLight</a> and <a class="el" href="class_usd_lux_plugin_light_filter.html" title="Light filter that provides properties that allow it to identify an external SdrShadingNode definition...">UsdLuxPluginLightFilter</a>, concrete schema types that specify a "node identification" encoding just like <a class="el" href="class_usd_shade_shader.html" title="Base class for all USD shaders.">UsdShadeShader</a>, so that the application need only plug its extensions into Sdr (by providing node definitions that will be consumed by render delegates), and not be required to take the extra step of generating USD schema definitions. Because they provide less easily accessible information to users, we do not advocate using these types in pipeline-persistent "user-level" USD files. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.6-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">&copy; Copyright 2023, Pixar Animation Studios. Generated on Mon Nov 20 2023 16:06:57 by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>