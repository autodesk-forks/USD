<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Universal Scene Description: TfMallocTag::Auto Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="usd_style.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="https://openusd.org/images/USDIcon.ico"/>
<!-- ... other metadata & script includes ... -->
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
</script>
<!-- Add warning banner to top of page if current page isn't the release version -->
<script>
function AddWarningBanner() 
{
  // Get current URL
  const loc = new URL(location.href);
  // Look for URL of the format "<USD hostname>/<version|dev|release>/api/<file.html>"
  // NOTE: If versioning approach ever changes, this will need updating
  var apiIndex = loc.pathname.indexOf("/api/");
  if (apiIndex >= 0) {
    // Truncate "/api/..." off path to get preceding path and "/" index
    var truncString = loc.pathname.slice(0,apiIndex);
    // Get index of first "/" before "/api/"
    var preApiIndex = truncString.lastIndexOf("/");
    var verString = truncString.slice(preApiIndex + 1);
    // if the current page isn't the release version, add a warning banner 
    if (verString !== "release") {
      // Create alternate "release" URL for page
      // NOTE: This won't always be a valid URL, e.g. if dev release has a brand new page
      var relURL = loc.pathname.substring(0,preApiIndex) + "/release" + loc.pathname.substring(apiIndex);
      var banner = document.createElement("div");
      banner.className = "non_release_version_warning";
      if (verString === "dev") {
        banner.innerHTML = "This document is for a version of USD that is under development. See <a href='" + relURL + "'>this page</a> for the current release.";
      } else {
        // For now, we assume any other string is an older version string
        banner.innerHTML = "This document is for an older version of USD. See <a href='" + relURL + "'>this page</a> for the current release.";
      }
      document.body.insertBefore(banner,document.body.childNodes[0]);
    }
  }
} 
</script>
</head>
<body onload="AddWarningBanner()">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="USDLogoDocs.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('class_tf_malloc_tag_1_1_auto.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="class_tf_malloc_tag_1_1_auto-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">TfMallocTag::Auto Class Reference<div class="ingroups"><a class="el" href="group__group__tf___malloc_tag.html">Memory Tagging System</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Scoped (i.e.  
 <a href="class_tf_malloc_tag_1_1_auto.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a8f81ded3b2712a8c9787f2b91b30f219"><td class="memItemLeft" align="right" valign="top"><a id="a8f81ded3b2712a8c9787f2b91b30f219"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Auto</b> (const <a class="el" href="class_tf_malloc_tag_1_1_auto.html">Auto</a> &amp;)=delete</td></tr>
<tr class="separator:a8f81ded3b2712a8c9787f2b91b30f219"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab41308b0e141cc21cf6bdbdf4406c51e"><td class="memItemLeft" align="right" valign="top"><a id="ab41308b0e141cc21cf6bdbdf4406c51e"></a>
<a class="el" href="class_tf_malloc_tag_1_1_auto.html">Auto</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="class_tf_malloc_tag_1_1_auto.html">Auto</a> &amp;)=delete</td></tr>
<tr class="separator:ab41308b0e141cc21cf6bdbdf4406c51e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed0847b3189286e75acec19297fbd0dd"><td class="memItemLeft" align="right" valign="top"><a id="aed0847b3189286e75acec19297fbd0dd"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>Auto</b> (<a class="el" href="class_tf_malloc_tag_1_1_auto.html">Auto</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:aed0847b3189286e75acec19297fbd0dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a344b7f30416c9ede9237ccf7b1bb7ba9"><td class="memItemLeft" align="right" valign="top"><a id="a344b7f30416c9ede9237ccf7b1bb7ba9"></a>
<a class="el" href="class_tf_malloc_tag_1_1_auto.html">Auto</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (<a class="el" href="class_tf_malloc_tag_1_1_auto.html">Auto</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a344b7f30416c9ede9237ccf7b1bb7ba9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0568be3a5a3e9b0cc9b6c172a5ce6d28"><td class="memTemplParams" colspan="2">template&lt;class Str , class... Strs&gt; </td></tr>
<tr class="memitem:a0568be3a5a3e9b0cc9b6c172a5ce6d28"><td class="memTemplItemLeft" align="right" valign="top">&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="class_tf_malloc_tag_1_1_auto.html#a0568be3a5a3e9b0cc9b6c172a5ce6d28">Auto</a> (Str &amp;&amp;name1, Strs &amp;&amp;... nameN)</td></tr>
<tr class="memdesc:a0568be3a5a3e9b0cc9b6c172a5ce6d28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Push one or more memory tags onto the local-call stack with names <code>name1</code> ...  <a href="#a0568be3a5a3e9b0cc9b6c172a5ce6d28">More...</a><br /></td></tr>
<tr class="separator:a0568be3a5a3e9b0cc9b6c172a5ce6d28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94c93747c8daa99d65c2a04c6be0748c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tf_malloc_tag_1_1_auto.html#a94c93747c8daa99d65c2a04c6be0748c">Release</a> ()</td></tr>
<tr class="memdesc:a94c93747c8daa99d65c2a04c6be0748c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pop the tag from the stack before it is destructed.  <a href="#a94c93747c8daa99d65c2a04c6be0748c">More...</a><br /></td></tr>
<tr class="separator:a94c93747c8daa99d65c2a04c6be0748c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e6a94b61c9cc87f344f283a41ef671b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_tf_malloc_tag_1_1_auto.html#a7e6a94b61c9cc87f344f283a41ef671b">~Auto</a> ()</td></tr>
<tr class="memdesc:a7e6a94b61c9cc87f344f283a41ef671b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pop a memory tag from the local-call stack.  <a href="#a7e6a94b61c9cc87f344f283a41ef671b">More...</a><br /></td></tr>
<tr class="separator:a7e6a94b61c9cc87f344f283a41ef671b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a737355e5790f2da1ddfa7303379a99cb"><td class="memItemLeft" align="right" valign="top"><a id="a737355e5790f2da1ddfa7303379a99cb"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>TfMallocTag</b></td></tr>
<tr class="separator:a737355e5790f2da1ddfa7303379a99cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Scoped (i.e. </p>
<p>local) object for creating/destroying memory tags.</p>
<p>Note: <code>TfAutoMallocTag</code> is a typedef to <code><a class="el" href="class_tf_malloc_tag_1_1_auto.html" title="Scoped (i.e.">TfMallocTag::Auto</a></code>; the convention is to use <code>TfAutoMallocTag</code> to make it clear that the local object exists only because its constructor and destructor modify program state.</p>
<p>A <code>TfAutoMallocTag</code> object is used to push memory tags onto the current call stack; destruction of the object pops the tags. Note that each thread has its own tag-stack.</p>
<p>There is very little cost to creating or destroying memory tags if <code><a class="el" href="class_tf_malloc_tag.html#a9ce0eae963544ac6d083e4f95d4a9b36" title="Initialize the memory tagging system.">TfMallocTag::Initialize()</a></code> has not been called: an inline read of a global variable and a branch. If tagging has been initialized, then there is a small cost associated with pushing and popping memory tags on the local stack. Most of the cost is taking a shared/read lock on a mutex and looking up the tag data structures in hash tables. Pushing or popping the call stack does not actually cause any memory allocation unless this is the first time that the given named tag has been encountered. </p>

<p class="definition">Definition at line <a class="el" href="malloc_tag_8h_source.html#l00255">255</a> of file <a class="el" href="malloc_tag_8h_source.html">mallocTag.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a0568be3a5a3e9b0cc9b6c172a5ce6d28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0568be3a5a3e9b0cc9b6c172a5ce6d28">&#9670;&nbsp;</a></span>Auto()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="class_tf_malloc_tag_1_1_auto.html">Auto</a> </td>
          <td>(</td>
          <td class="paramtype">Str &amp;&amp;&#160;</td>
          <td class="paramname"><em>name1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Strs &amp;&amp;...&#160;</td>
          <td class="paramname"><em>nameN</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Push one or more memory tags onto the local-call stack with names <code>name1</code> ... </p>
<p><code>nameN</code>. The passed names should be either string literals, const char pointers, or std::strings.</p>
<p>If <code><a class="el" href="class_tf_malloc_tag.html#a9ce0eae963544ac6d083e4f95d4a9b36" title="Initialize the memory tagging system.">TfMallocTag::Initialize()</a></code> has not been called, this constructor does essentially no work, assuming the names are string literals or a pointer to an existing c-string. However if any of the names are expressions that evaluate to <code>std::string</code> objects, the work done constructing those strings will still be incurred. If this is an issue, you can query <code><a class="el" href="class_tf_malloc_tag.html#ab2c217951b4362bb6661a1e863105320" title="Return true if the tagging system is active.">TfMallocTag::IsInitialized()</a></code> to avoid unneeded work when tagging is inactive.</p>
<p>Objects of this class should only be created as local variables; never as member variables, global variables, or via <code>new</code>. If you can't create your object as a local variable, you can make manual calls to <code><a class="el" href="class_tf_malloc_tag.html#a74ab306ad41ec3ea17f4082be70bd60d" title="Manually push a tag onto the stack.">TfMallocTag::Push()</a></code> and <code><a class="el" href="class_tf_malloc_tag.html#ab7dd1bc7d631e417135051f4405ee177" title="Manually pop a tag from the stack.">TfMallocTag::Pop()</a></code>, though you should do this only as a last resort. </p>

<p class="definition">Definition at line <a class="el" href="malloc_tag_8h_source.html#l00281">281</a> of file <a class="el" href="malloc_tag_8h_source.html">mallocTag.h</a>.</p>

</div>
</div>
<a id="a7e6a94b61c9cc87f344f283a41ef671b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e6a94b61c9cc87f344f283a41ef671b">&#9670;&nbsp;</a></span>~Auto()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">~<a class="el" href="class_tf_malloc_tag_1_1_auto.html">Auto</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pop a memory tag from the local-call stack. </p>
<p>If <code><a class="el" href="class_tf_malloc_tag.html#a9ce0eae963544ac6d083e4f95d4a9b36" title="Initialize the memory tagging system.">TfMallocTag::Initialize()</a></code> was not called when this tag was pushed onto the stack, popping the tag from the stack does essentially no (measurable) work. </p>

<p class="definition">Definition at line <a class="el" href="malloc_tag_8h_source.html#l00309">309</a> of file <a class="el" href="malloc_tag_8h_source.html">mallocTag.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a94c93747c8daa99d65c2a04c6be0748c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94c93747c8daa99d65c2a04c6be0748c">&#9670;&nbsp;</a></span>Release()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Release </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pop the tag from the stack before it is destructed. </p>
<p>Normally you should not use this. The normal destructor is preferable because it ensures proper release order. If you call <code><a class="el" href="class_tf_malloc_tag_1_1_auto.html#a94c93747c8daa99d65c2a04c6be0748c" title="Pop the tag from the stack before it is destructed.">Release()</a></code>, make sure all tags are released in the opposite order they were declared in. It is better to use sub-scopes to control the life span of tags, but if that won't work, <code><a class="el" href="class_tf_malloc_tag_1_1_auto.html#a94c93747c8daa99d65c2a04c6be0748c" title="Pop the tag from the stack before it is destructed.">Release()</a></code> is still preferable to <code><a class="el" href="class_tf_malloc_tag.html#a74ab306ad41ec3ea17f4082be70bd60d" title="Manually push a tag onto the stack.">TfMallocTag::Push()</a></code> and <code><a class="el" href="class_tf_malloc_tag.html#ab7dd1bc7d631e417135051f4405ee177" title="Manually pop a tag from the stack.">TfMallocTag::Pop()</a></code> because it isn't vulnerable to early returns or exceptions. </p>

<p class="definition">Definition at line <a class="el" href="malloc_tag_8h_source.html#l00297">297</a> of file <a class="el" href="malloc_tag_8h_source.html">mallocTag.h</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>pxr/base/tf/<a class="el" href="malloc_tag_8h_source.html">mallocTag.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.6-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="class_tf_malloc_tag.html">TfMallocTag</a></li><li class="navelem"><a class="el" href="class_tf_malloc_tag_1_1_auto.html">Auto</a></li>
    <li class="footer">&copy; Copyright 2023, Pixar Animation Studios. Generated on Mon Nov 20 2023 16:07:04 by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>