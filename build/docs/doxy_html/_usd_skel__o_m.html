<!-- HTML header for doxygen 1.8.15-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Universal Scene Description: Object Model</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="usd_style.css" rel="stylesheet" type="text/css"/>
<link rel="shortcut icon" href="https://openusd.org/images/USDIcon.ico"/>
<!-- ... other metadata & script includes ... -->
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
</script>
<!-- Add warning banner to top of page if current page isn't the release version -->
<script>
function AddWarningBanner() 
{
  // Get current URL
  const loc = new URL(location.href);
  // Look for URL of the format "<USD hostname>/<version|dev|release>/api/<file.html>"
  // NOTE: If versioning approach ever changes, this will need updating
  var apiIndex = loc.pathname.indexOf("/api/");
  if (apiIndex >= 0) {
    // Truncate "/api/..." off path to get preceding path and "/" index
    var truncString = loc.pathname.slice(0,apiIndex);
    // Get index of first "/" before "/api/"
    var preApiIndex = truncString.lastIndexOf("/");
    var verString = truncString.slice(preApiIndex + 1);
    // if the current page isn't the release version, add a warning banner 
    if (verString !== "release") {
      // Create alternate "release" URL for page
      // NOTE: This won't always be a valid URL, e.g. if dev release has a brand new page
      var relURL = loc.pathname.substring(0,preApiIndex) + "/release" + loc.pathname.substring(apiIndex);
      var banner = document.createElement("div");
      banner.className = "non_release_version_warning";
      if (verString === "dev") {
        banner.innerHTML = "This document is for a version of USD that is under development. See <a href='" + relURL + "'>this page</a> for the current release.";
      } else {
        // For now, we assume any other string is an older version string
        banner.innerHTML = "This document is for an older version of USD. See <a href='" + relURL + "'>this page</a> for the current release.";
      }
      document.body.insertBefore(banner,document.body.childNodes[0]);
    }
  }
} 
</script>
</head>
<body onload="AddWarningBanner()">
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="USDLogoDocs.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_usd_skel__o_m.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Object Model </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="UsdSkel_OM_Overview"></a>
Overview</h1>
<p>In UsdSkel, skeletons are encoded as independent entities, which are 'bound' to the primitives that they affect &ndash; similar to material bindings.</p>
<p>For example:</p>
<div class="fragment"><div class="line">def Skeleton <span class="stringliteral">&quot;Skel&quot;</span> (</div><div class="line">    prepend apiSchemas = [<span class="stringliteral">&quot;SkelBindingAPI&quot;</span>]</div><div class="line">)</div><div class="line">{</div><div class="line">    rel skel:animationSource = &lt;Anim&gt;</div><div class="line"></div><div class="line">    def SkelAnimation <span class="stringliteral">&quot;Anim&quot;</span> {}</div><div class="line">}</div><div class="line"></div><div class="line">def SkelRoot <span class="stringliteral">&quot;Character&quot;</span> (</div><div class="line">    prepend apiSchemas = [<span class="stringliteral">&quot;SkelBindingAPI&quot;</span>]</div><div class="line">)</div><div class="line">{</div><div class="line">    rel skel:skeleton = &lt;/Skel&gt;</div><div class="line"></div><div class="line">    def Mesh <span class="stringliteral">&quot;Mesh&quot;</span> (</div><div class="line">        prepend apiSchemas = [<span class="stringliteral">&quot;SkelBindingAPI&quot;</span>]</div><div class="line">    )</div><div class="line">{</div><div class="line">        <span class="keywordtype">int</span>[] primvars:skel:jointIndices = ...</div><div class="line">        <span class="keywordtype">float</span>[] primvars:skel:jointWeights = ...</div><div class="line">}</div></div><!-- fragment --><p>Above, there is a single <em>skeleton</em> at <code>&lt;/Skel&gt;</code>, which is animated according to the <em>animation</em> at <code>&lt;/Skel/Anim&gt;</code>. That skeleton is bound to <code>&lt;/Character&gt;</code>, and so affects every <em>skinnable primitive</em> beneath <code>&lt;/Character&gt;</code>, such as <code>&lt;/Character/Mesh&gt;</code>.</p>
<p>UsdSkel provides various "query" objects, which provide convenient API to assist extraction of data related to the above components: For Skeleton primitives, a <a class="el" href="_usd_skel__o_m.html#UsdSkel_OM_SkeletonQuery">skeleton query</a> can be created to extra resolved data for the skeleton. Similarly, a animation query provides can be created to extract data from an animation. Finally, a <a class="el" href="_usd_skel__o_m.html#UsdSkel_OM_SkinningQuery">skinning query</a> can be used to introspect bindings on skinnable primitives, or to compute the effect of skinning.</p>
<p>All of these query objects are created through a <a class="el" href="_usd_skel__o_m.html#UsdSkel_OM_Cache">skel cache</a>.</p>
<h1><a class="anchor" id="UsdSkel_OM_Cache"></a>
UsdSkelCache: Persistent Skeleton Cache</h1>
<p>Bindings in UsdSkel are based on a set of inherited binding properties, set through the <a class="el" href="class_usd_skel_binding_a_p_i.html" title="Provides API for authoring and extracting all the skinning-related data that lives in the &quot;geometry h...">UsdSkelBindingAPI</a> schema. The <a class="el" href="class_usd_skel_cache.html" title="Thread-safe cache for accessing query objects for evaluating skeletal data.">UsdSkelCache</a> provides a cache with an explicit population step, which provides an efficient and simplified way for clients to reason about resolved properties.</p>
<h1><a class="anchor" id="UsdSkel_OM_SkeletonQuery"></a>
UsdSkelSkeletonQuery: Skeleton Resolver</h1>
<p>A <a class="el" href="class_usd_skel_skeleton_query.html" title="Primary interface to reading bound skeleton data.">UsdSkelSkeletonQuery</a> provides a simplified API for querying resolved data related to a <a class="el" href="class_usd_skel_skeleton.html" title="Describes a skeleton.">UsdSkelSkeleton</a>.</p>
<p>A <a class="el" href="class_usd_skel_skeleton_query.html" title="Primary interface to reading bound skeleton data.">UsdSkelSkeletonQuery</a> is created through a <a class="el" href="class_usd_skel_cache.html" title="Thread-safe cache for accessing query objects for evaluating skeletal data.">UsdSkelCache</a> instance. Internally, constructing a query through a cache presents opportunities for sharing work across instanced skeletons. <a class="el" href="class_usd_skel_anim_query.html" title="Class providing efficient queries of primitives that provide skel animation.">UsdSkelAnimQuery</a> objects, which a <a class="el" href="class_usd_skel_skeleton_query.html" title="Primary interface to reading bound skeleton data.">UsdSkelSkeletonQuery</a> references (when a valid animation source is bound) are also constructed through a <a class="el" href="class_usd_skel_cache.html" title="Thread-safe cache for accessing query objects for evaluating skeletal data.">UsdSkelCache</a>. Internally, the <a class="el" href="class_usd_skel_cache.html" title="Thread-safe cache for accessing query objects for evaluating skeletal data.">UsdSkelCache</a> will share both the <a class="el" href="class_usd_skel_anim_query.html" title="Class providing efficient queries of primitives that provide skel animation.">UsdSkelAnimQuery</a> objects across primitives that reference the same animation, as well as information about the definition of the skeleton, corresponding to a resolved <a class="el" href="class_usd_skel_skeleton.html" title="Describes a skeleton.">UsdSkelSkeleton</a> primitive. Both of these properties are shared across Usd_ScenegraphInstancing_Overview "instance primitives."</p>
<h1><a class="anchor" id="UsdSkel_OM_AnimQuery"></a>
UsdSkelAnimQuery: Animation Resolver</h1>
<p>A <a class="el" href="class_usd_skel_anim_query.html" title="Class providing efficient queries of primitives that provide skel animation.">UsdSkelAnimQuery</a> provides an interface to computing resolved animation for an animation source.</p>
<p>A <a class="el" href="class_usd_skel_anim_query.html" title="Class providing efficient queries of primitives that provide skel animation.">UsdSkelAnimQuery</a> is created through a <a class="el" href="class_usd_skel_cache.html" title="Thread-safe cache for accessing query objects for evaluating skeletal data.">UsdSkelCache</a> instance. This is because we anticipate adding <em>compound</em> animation sources like animation blenders in the future, and expect that different instances of blenders may reference many of the same animations, so requiring a <a class="el" href="class_usd_skel_anim_query.html" title="Class providing efficient queries of primitives that provide skel animation.">UsdSkelAnimQuery</a> to be constructed through a <a class="el" href="class_usd_skel_cache.html" title="Thread-safe cache for accessing query objects for evaluating skeletal data.">UsdSkelCache</a> presents an opportunity to share references to queries internally.</p>
<p>Data computed through a <a class="el" href="class_usd_skel_anim_query.html" title="Class providing efficient queries of primitives that provide skel animation.">UsdSkelAnimQuery</a> includes joint transformations, as well as blend shapes.</p>
<p>It is important to note that per-joint data computations, like joint transformations, provide animation data in the joint order of the animation source. This ordering may not match the order of data as defined on as skeleton, and must be mapped into skeleton-order by an <a class="el" href="_usd_skel__o_m.html#UsdSkel_OM_AnimMapper">anim mapper</a>.</p>
<p>It is expected that clients should rarely need to interact with a <a class="el" href="class_usd_skel_anim_query.html" title="Class providing efficient queries of primitives that provide skel animation.">UsdSkelAnimQuery</a>. Instead, clients will typically work through a <a class="el" href="_usd_skel__o_m.html#UsdSkel_OM_SkeletonQuery">skeleton query</a> when querying joint transforms.</p>
<h1><a class="anchor" id="UsdSkel_OM_SkinningQuery"></a>
UsdSkelSkinningQuery: Resolving Joint Influences and Skinning</h1>
<p>At each skinnable primitive, a <a class="el" href="class_usd_skel_skinning_query.html" title="Object used for querying resolved bindings for skinning.">UsdSkelSkinningQuery</a> is populated on a <a class="el" href="class_usd_skel_cache.html" title="Thread-safe cache for accessing query objects for evaluating skeletal data.">UsdSkelCache</a> to facilitate querying of properties that define how that primitive is to be skinned. This includes <a class="el" href="_usd_skel__intro.html#UsdSkel_Term_JointInfluences">joint influences</a> and a geom bind transform.</p>
<h1><a class="anchor" id="UsdSkel_OM_AnimMapper"></a>
UsdSkelAnimMapper: Remapping Data Between Different Orders</h1>
<p>A helper for mapping vectorized data from one ordering to another.</p>
<p>Vectorized data in UsdSkel may be required to adhere to a variety of different orderings. For example, an animation source provides joint data in its own order, which may need to be remapped into the joint order defined for a skeleton. The skeleton order itself may also need to be remapped into an order declared at a binding site via a <em>skel:joints</em> binding relationship. Clients may also want to remap vectorized animation data into their own, externally-defined order.</p>
<p>A UsdSkelAnimMapper provides a mapping of vectorized data from one ordering to another to simplify these tasks. Based on two token orderings &ndash; as defined by two VtTokenArray constructor arguments &ndash; a mapper provides a reusable structure for remapping data between different orderings.</p>
<p>For joint orderings defined as part of the core schemas, clients should not generally need to manually construct UsdSkelAnimMapper objects. Rather, the mapper instances are populated on the <a class="el" href="_usd_skel__o_m.html#UsdSkel_OM_Cache">skel cache</a>, held by the different <em>query</em> objects, where needed. Those UsdSkelAnimMapper objects may be shared across different query objects, if possible.</p>
<p>An effort is made in mappers to provide additional information about a remapping task, to facilitate optimizations while remapping data. For instance, the result of UsdSkelAnimMapper::IsIdentity can be used to decide whether or not any remapping work is required &ndash; possibly allowing some array copies to be bypassed. Similarly, UsdSkelAnimMapper::IsNull indicates that no source values can be remapped (and so maybe we need not bother computing the source data to begin with). </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.6-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="usd_skel_page_front.html">UsdSkel : USD Skeleton Schema and API</a></li>
    <li class="footer">&copy; Copyright 2023, Pixar Animation Studios. Generated on Mon Nov 20 2023 16:06:57 by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.15 </li>
  </ul>
</div>
</body>
</html>